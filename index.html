<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700;800&family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <title>Sandoz KZ | Доз-карта (Wheel)</title>
  <style>
    :root{
      /* Typography */
      --font: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-display: 'Sora', sans-serif;

      /* Sandoz-ish palette (замени на официальные HEX, если у тебя есть гайд) */
      --sandoz-blue: #1C59B5;
      --sandoz-light-blue: #5DA6FF;
      --sandoz-dark-blue: #001C4A;
      --sandoz-orange: #FC522D;
      
      /* Дополнительные Sandoz цвета */
      --medium-blue: #5DA6FF;
      --light-blue-bg: #A8D5FF;
      --sand: #F1ECE9;
      --stone: #D6C6B6;
      --taupe: #A39F8B;
      --teal: #006B76;
      --mustard: #D5862C;


      --bg: linear-gradient(135deg, #001C4A 0%, #1C59B5 100%);
      --card: rgba(255, 255, 255, 0.98);
      --text: #1D2B36;
      --muted: #60707F;
      --border:#D9E1E8;

      --shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 8px 20px rgba(28, 89, 181, 0.1);
      --radius: 14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--font);
      background: linear-gradient(135deg, var(--sandoz-dark-blue) 0%, var(--sandoz-blue) 100%);
      color: var(--text);
      min-height: 100vh;
    }


    /* Noise overlay */
    .app::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      z-index: 1000;
    }
    .app{
      max-width: 1200px;
      position: relative;
      margin: 0 auto;
      padding: 16px;
      display: grid;
      gap: 12px;
    }

    header{
      backdrop-filter: blur(10px);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .brand{
      display:flex;
      align-items:baseline;
      gap: 12px;
    }
    .brand h1{
      font-family: var(--font-display);
      margin:0;
      font-size: 18px;
      letter-spacing: .2px;
      color: var(--sandoz-dark-blue);
    }
    .brand .sub{
      font-size: 12px;
      color: var(--muted);
    }

    .icon-btn{
      border: 1px solid var(--border);
      background: var(--card);
      height: 36px;
      width: 36px;
      border-radius: 10px;
      cursor:pointer;
      display:grid;
      place-items:center;
      color: var(--sandoz-dark-blue);
      font-weight: 900;
    }
    .icon-btn:hover{border-color: var(--sandoz-light-blue)}

    .controls{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px 16px;
      display:grid;
      gap: 12px;
    }

    .row{
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    .field{
      display:grid;
      gap: 6px;
      min-width: 220px;
    }
    .field.small{min-width: 180px}
    .label{
      font-size: 12px;
      color: var(--muted);
    }

    .segmented{
      display:flex;
      background: #EFF3F6;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 4px;
      gap: 4px;
    }
    .segmented button{
      border: 0;
      background: transparent;
      padding: 10px 12px;
      border-radius: 10px;
      cursor:pointer;
      font-weight: 800;
      color: var(--sandoz-dark-blue);
      min-width: 120px;
    }
    .segmented button[aria-pressed="true"]{
      box-shadow: 0 4px 12px rgba(28, 89, 181, 0.3);
      background: var(--sandoz-dark-blue);
      color: #fff;
    }

    .tiles{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .tile{
      border: 1px solid var(--border);
      background: var(--card);
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
      min-width: 170px;
      text-align:left;
    }
    .tile:hover{border-color: var(--sandoz-light-blue)}
    .tile[aria-pressed="true"]{
      border-color: var(--sandoz-blue);
      box-shadow: 0 0 0 3px rgba(28, 89, 181, 0.12);
    }
    .tile .t{
      font-weight: 800;
      color: var(--sandoz-dark-blue);
      font-size: 13px;
      margin-bottom: 4px;
    }
    .tile .d{
      color: var(--muted);
      font-size: 12px;
      line-height: 1.2;
    }

    .chips{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items:center;
    }
    .chip{
      border: 1px solid var(--border);
      background: var(--card);
      border-radius: 999px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 800;
      color: var(--sandoz-dark-blue);
      min-width: 68px;
      text-align:center;
    }
    .chip:hover{border-color: var(--sandoz-light-blue)}
    .chip[aria-pressed="true"]{
      border-color: var(--sandoz-blue);
      background: rgba(28, 89, 181, 0.08);
    }
    .chip:disabled{
      cursor:not-allowed;
      opacity: .45;
    }

    .weight{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
    }
    input[type="range"]{
      width: 280px;
      accent-color: var(--sandoz-blue);
    }
    .num{
      width: 110px;
      padding: 10px 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 16px;
      font-weight: 800;
      color: var(--sandoz-dark-blue);
    }
    .hint{
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
      min-height: 16px;
    }
    .hint.warn{color: #8A6B00}

    .main{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px 16px;
    }

    .wheel-wrap{
      display:grid;
      place-items:center;
      position: relative;
      min-height: 520px;
      overflow:hidden;
    }

    .wheel{
      width: min(520px, 100%);
      aspect-ratio: 1 / 1;
      position: relative;
      display:grid;
      place-items:center;
      user-select:none;
    }

    .pointer{
      position:absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 12px solid transparent;
      border-right: 12px solid transparent;
      border-bottom: 22px solid var(--sandoz-dark-blue);
      filter: drop-shadow(0 2px 2px rgba(0,0,0,0.15));
      z-index: 5;
    }

    .wheel-svg{
      width: 100%;
      height: 100%;
      overflow: visible;
    }

    .rotor{
      transform-origin: 50% 50%;
      transition: transform 320ms ease-out;
    }

    .center-badge{
      font-family: var(--font-display);
      position:absolute;
      inset: 50% auto auto 50%;
      transform: translate(-50%,-50%);
      z-index: 6;
      background: rgba(255,255,255,0.92);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 900;
      color: var(--sandoz-dark-blue);
      box-shadow: 0 8px 20px rgba(11,42,74,0.12);
      font-size: 14px;
      display:flex;
      gap: 8px;
      align-items:center;
      text-align:center;
    }
    .center-badge .pill{
      background: var(--sandoz-blue);
      color: #fff;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
    }

    .windows{
      position:absolute;
      inset: auto 14px 18px 14px;
      z-index: 7;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .window{
      min-width: 140px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.96);
      padding: 10px 12px;
      box-shadow: 0 10px 24px rgba(11,42,74,0.10);
      cursor:pointer;
    }
    .window:hover{border-color: var(--sandoz-light-blue)}
    .window.active{
      border-color: var(--sandoz-blue);
      box-shadow: 0 0 0 3px rgba(0,166,81,0.14), 0 10px 24px rgba(11,42,74,0.10);
    }
    .window.disabled{
      opacity: .45;
      cursor: not-allowed;
    }
    .window .w-top{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap: 10px;
      margin-bottom: 4px;
    }
    .window .w-title{
      font-size: 12px;
      color: var(--muted);
      font-weight: 800;
    }
    .window .w-dose{
      font-size: 22px;
      font-weight: 900;
      color: var(--sandoz-dark-blue);
      letter-spacing: .2px;
    }
    .window .w-sub{
      font-size: 12px;
      color: var(--muted);
    }

    .result h2{
      margin: 0 0 10px 0;
      font-size: 16px;
      color: var(--sandoz-dark-blue);
    }
    .kv{
      display:grid;
      gap: 10px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #FAFBFC;
    }
    .kv .line{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      align-items:baseline;
    }
    .kv .k{
      color: var(--muted);
      font-size: 13px;
    }
    .kv .v{
      font-weight: 900;
      color: var(--sandoz-dark-blue);
      font-size: 18px;
      text-align:right;
    }
    .kv .v.small{font-size: 14px; font-weight: 800; color: var(--text)}

    .actions{
      margin-top: 12px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn{
      border: 1px solid var(--border);
      background: var(--card);
      padding: 11px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 900;
      color: var(--sandoz-dark-blue);
      min-width: 180px;
    }
    .btn:hover{border-color: var(--sandoz-light-blue)}
    .btn.primary{
      background: var(--sandoz-blue);
      color: #fff;
      border-color: var(--sandoz-blue);
    }
    .btn.primary:hover{filter: brightness(0.98)}
    .btn:disabled{opacity:.45; cursor:not-allowed}

    .note{
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
    }
    .note strong{color: var(--sandoz-dark-blue)}

    /* Drawer */
    .drawer-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(11,42,74,0.35);
      display:none;
      z-index: 20;
    }
    .drawer-backdrop.open{display:block}

    .drawer{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--card);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      border: 1px solid var(--border);
      box-shadow: 0 -20px 40px rgba(0,0,0,0.18);
      transform: translateY(110%);
      transition: transform 240ms ease-out;
      z-index: 21;
      max-height: 72vh;
      overflow:auto;
    }
    .drawer.open{transform: translateY(0)}
    .drawer header{
      position: sticky;
      top: 0;
      background: var(--card);
      box-shadow: 0 6px 18px rgba(11,42,74,0.08);
      border-radius: 0;
      border: 0;
      border-bottom: 1px solid var(--border);
    }
    .drawer .content{padding: 12px 16px 18px 16px;}
    table{
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    th, td{
      border-bottom: 1px solid var(--border);
      padding: 10px 8px;
      text-align:left;
      vertical-align: top;
    }
    th{color: var(--muted); font-weight: 900;}
    tr.hl td{background: rgba(28, 89, 181, 0.08)}

    .toast{
      position: fixed;
      top: 14px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--sandoz-dark-blue);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: 900;
      display:none;
      z-index: 30;
      box-shadow: 0 12px 28px rgba(0,0,0,0.25);
    }
    .toast.show{display:block}

    /* Modal */
    .modal-backdrop{
      position: fixed;
      inset:0;
      background: rgba(11,42,74,0.45);
      display:none;
      z-index: 40;
      place-items:center;
      padding: 16px;
    }
    .modal-backdrop.open{display:grid}
    .modal{
      width: min(720px, 100%);
      background: var(--card);
      border-radius: 16px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .modal h3{margin:0 0 8px 0; color: var(--sandoz-dark-blue)}
    .modal p{margin: 8px 0; color: var(--text); line-height: 1.4}
    .modal ul{margin: 8px 0 0 18px; color: var(--text);}
    .modal li{margin: 6px 0;}

    @media (max-width: 900px){
      .main{grid-template-columns: 1fr;}
      .wheel-wrap{min-height: 460px;}
      input[type="range"]{width: min(320px, 100%);}
      .field{min-width: 100%;}
      .segmented button{min-width: 0; flex: 1;}
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .card {
      animation: fadeIn 0.5s ease-out;
    }
    
    .wheel {
      animation: fadeIn 0.8s ease-out 0.2s backwards;
    }
  </style>
</head>
<body>
  <div class="toast" id="toast">Скопировано</div>

  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-label="Информация">
    <div class="modal">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
        <h3>Информация</h3>
        <button class="icon-btn" id="closeModal" aria-label="Закрыть">✕</button>
      </div>
      <p><strong>Назначение инструмента:</strong> быстрый подбор дозы по доз-картам (KZ) на основе исходной таблицы.</p>
      <ul>
        <li>Дозы берутся <strong>только из реестра</strong>. Формулы мг/кг → мл не рассчитываются.</li>
        <li>Если по выбранному весу/режиму нет строки — показывается «нет дозы по карте».</li>
        <li>Для внутреннего использования. Клинические решения — ответственность врача.</li>
      </ul>
      <p class="note">Шрифт: Arial. Цвета — токены (можно заменить на официальные значения Sandoz).</p>
    </div>
  </div>

  <div class="drawer-backdrop" id="drawerBackdrop" aria-hidden="true"></div>
  <div class="drawer" id="drawer" aria-hidden="true">
    <header>
      <div class="brand">
        <h1>Проверка по карте</h1>
        <div class="sub" id="drawerSub"></div>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button class="btn" id="toggleAll">Показать всю таблицу</button>
        <button class="icon-btn" id="closeDrawer" aria-label="Закрыть">✕</button>
      </div>
    </header>
    <div class="content">
      <div class="note" id="drawerNote"></div>
      <div style="overflow:auto;">
        <table>
          <thead>
            <tr>
              <th style="width:120px;">Вес</th>
              <th style="width:160px;">Режим</th>
              <th style="width:140px;">Мл / приём</th>
              <th style="width:120px;">Раз/сут</th>
              <th>Источник</th>
            </tr>
          </thead>
          <tbody id="drawerTbody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="app">
    <header>
      <div class="brand">
        <h1>Dosing Wheel · KZ</h1>
        <div class="sub" id="subtitle">Основано на доз-карте</div>
      </div>
      <button class="icon-btn" id="infoBtn" aria-label="Информация">i</button>
    </header>

    <section class="controls" aria-label="Управление">
      <div class="row">
        <div class="field">
          <div class="label">Препарат</div>
          <div class="segmented" id="productSeg" role="group" aria-label="Препарат"></div>
        </div>

        <div class="field">
          <div class="label">Форма / концентрация</div>
          <div class="tiles" id="variantTiles"></div>
        </div>

        <div class="field small" id="mgkgField" style="display:none;">
          <div class="label">Режим (мг/кг/сут)</div>
          <div class="chips" id="mgkgChips"></div>
        </div>

        <div class="field small">
          <div class="label">Вес ребёнка</div>
          <div class="weight">
            <input type="range" id="weightRange" min="2" max="45" step="1" value="10" aria-label="Вес, кг">
            <input type="number" id="weightInput" class="num" min="2" max="45" step="1" value="10" inputmode="numeric" aria-label="Вес, кг">
            <div style="font-weight:900; color:var(--muted);">кг</div>
          </div>
          <div class="hint" id="weightHint"></div>
        </div>
      </div>
    </section>

    <section class="main">
      <div class="card wheel-wrap" aria-label="Колесо доз">
        <div class="wheel" id="wheel">
          <div class="pointer" aria-hidden="true"></div>
          <svg class="wheel-svg" viewBox="0 0 500 500" aria-hidden="true">
            <g id="rotor" class="rotor"></g>
            <circle cx="250" cy="250" r="214" fill="none" stroke="rgba(11,42,74,0.12)" stroke-width="2"></circle>
            <circle cx="250" cy="250" r="110" fill="rgba(255,255,255,0.9)" stroke="rgba(11,42,74,0.10)" stroke-width="2"></circle>
          </svg>

          <div class="center-badge" id="centerBadge">
            <span class="pill" id="badgeProduct">—</span>
            <span id="badgeVariant">—</span>
          </div>

          <div class="windows" id="windows"></div>
        </div>
      </div>

      <div class="card result" aria-label="Результат">
        <h2 id="resultTitle">Назначение</h2>

        <div class="kv" aria-live="polite">
          <div class="line">
            <div class="k">Разовая доза</div>
            <div class="v" id="doseMl">—</div>
          </div>
          <div class="line">
            <div class="k">Кратность</div>
            <div class="v small" id="freq">—</div>
          </div>
          <div class="line">
            <div class="k">Суточно</div>
            <div class="v" id="daily">—</div>
          </div>
          <div class="line" id="courseLine" style="display:none;">
            <div class="k">Курс</div>
            <div class="v small" id="course">—</div>
          </div>
          <div class="line" id="regimenLine" style="display:none;">
            <div class="k">Режим</div>
            <div class="v small" id="regimen">—</div>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="copyBtn" disabled>Скопировать назначение</button>
          <button class="btn" id="checkBtn">Проверка по карте</button>
        </div>

        <div class="note" id="note"></div>
      </div>
    </section>
  </div>

  <!-- Embedded registry -->
  <script id="registryData" type="application/json">{
  "meta": {
    "source_file": "Доз.карты КЗ.xlsx",
    "generated_date": "2026-01-28",
    "locale": "ru-KZ",
    "notes": [
      "Все дозы извлечены из 3 вкладок Excel; значения '-' интерпретированы как отсутствующие/неприменимые.",
      "Для Амоксиклав и Оспамокс частота приемов выведена из текста таблиц (2 раза/сутки) и логики разовых доз; в данных хранится freq_per_day.",
      "Для Азидрат добавлены вычисляемые поля dose_mg_per_administration_calc (по концентрации из заголовка) и dose_mg_per_administration_from_text (если указано в скобках)."
    ]
  },
  "products": [
    {
      "product_id": "amoxiclav",
      "brand_ru": "Амоксиклав",
      "inn_ru": "амоксициллин/клавулановая кислота",
      "market": "KZ"
    },
    {
      "product_id": "ospamox",
      "brand_ru": "Оспамокс",
      "inn_ru": "амоксициллин",
      "market": "KZ"
    },
    {
      "product_id": "azidrat",
      "brand_ru": "Азидрат",
      "inn_ru": "азитромицин",
      "market": "KZ"
    }
  ],
  "variants": [
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "product_id": "amoxiclav",
      "title_ru": "Расчет разовой дозы препарата Амоксиклав® 156,25 мг/5 мл",
      "strength_label_ru": "156,25 мг/5 мл",
      "dose_basis": "mgkg_per_day",
      "freq_per_day": 3,
      "mgkg_options": [
        20.0,
        40.0,
        60.0
      ],
      "weight_min_kg": 2.0,
      "weight_max_kg": 20.0,
      "coverage_by_mgkg": [
        {
          "mgkg_per_day": 20.0,
          "weight_min_kg": 2.0,
          "weight_max_kg": 20.0,
          "rows": 19
        },
        {
          "mgkg_per_day": 40.0,
          "weight_min_kg": 2.0,
          "weight_max_kg": 20.0,
          "rows": 19
        },
        {
          "mgkg_per_day": 60.0,
          "weight_min_kg": 2.0,
          "weight_max_kg": 6.0,
          "rows": 5
        }
      ],
      "therapy_days": null,
      "target_mgkg_per_day": null
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "product_id": "amoxiclav",
      "title_ru": "Расчет разовой дозы препарата Амоксиклав® 312,5 мг/5 мл",
      "strength_label_ru": "312,5 мг/5 мл",
      "dose_basis": "mgkg_per_day",
      "freq_per_day": 3,
      "mgkg_options": [
        20.0,
        40.0,
        60.0
      ],
      "weight_min_kg": 3.0,
      "weight_max_kg": 39.0,
      "coverage_by_mgkg": [
        {
          "mgkg_per_day": 20.0,
          "weight_min_kg": 3.0,
          "weight_max_kg": 39.0,
          "rows": 37
        },
        {
          "mgkg_per_day": 40.0,
          "weight_min_kg": 3.0,
          "weight_max_kg": 39.0,
          "rows": 37
        },
        {
          "mgkg_per_day": 60.0,
          "weight_min_kg": 3.0,
          "weight_max_kg": 13.0,
          "rows": 11
        }
      ],
      "therapy_days": null,
      "target_mgkg_per_day": null
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "product_id": "amoxiclav",
      "title_ru": "Расчет разовой дозы препарата Амоксиклав® 457мг/5 мл",
      "strength_label_ru": "457 мг/5 мл",
      "dose_basis": "mgkg_per_day",
      "freq_per_day": 2,
      "mgkg_options": [
        25.0,
        45.0,
        70.0
      ],
      "weight_min_kg": 5.0,
      "weight_max_kg": 40.0,
      "coverage_by_mgkg": [
        {
          "mgkg_per_day": 25.0,
          "weight_min_kg": 5.0,
          "weight_max_kg": 40.0,
          "rows": 16
        },
        {
          "mgkg_per_day": 45.0,
          "weight_min_kg": 5.0,
          "weight_max_kg": 40.0,
          "rows": 16
        },
        {
          "mgkg_per_day": 70.0,
          "weight_min_kg": 13.0,
          "weight_max_kg": 40.0,
          "rows": 8
        }
      ],
      "therapy_days": null,
      "target_mgkg_per_day": null
    },
    {
      "variant_id": "azidrat_100_5ml",
      "product_id": "azidrat",
      "title_ru": "Азитромицин, 100мг/5 мл",
      "strength_label_ru": "100 мг/5 мл",
      "dose_basis": "fixed_by_weight",
      "freq_per_day": 1,
      "mgkg_options": [],
      "weight_min_kg": 5.0,
      "weight_max_kg": 45.0,
      "coverage_by_mgkg": [],
      "therapy_days": 3,
      "target_mgkg_per_day": 10
    },
    {
      "variant_id": "azidrat_200_5ml",
      "product_id": "azidrat",
      "title_ru": "Азитромицин, 200мг/5 мл",
      "strength_label_ru": "200 мг/5 мл",
      "dose_basis": "fixed_by_weight",
      "freq_per_day": 1,
      "mgkg_options": [],
      "weight_min_kg": 10.0,
      "weight_max_kg": 45.0,
      "coverage_by_mgkg": [],
      "therapy_days": 3,
      "target_mgkg_per_day": 10
    },
    {
      "variant_id": "ospamox_125_5ml",
      "product_id": "ospamox",
      "title_ru": "Дозировочная карта для препарата Оспамокс 125 мг/5 мл в зависимости от массы тела",
      "strength_label_ru": "125 мг/5 мл",
      "dose_basis": "mgkg_per_day",
      "freq_per_day": 2,
      "mgkg_options": [
        40.0,
        50.0,
        90.0
      ],
      "weight_min_kg": 2.0,
      "weight_max_kg": 10.0,
      "coverage_by_mgkg": [
        {
          "mgkg_per_day": 40.0,
          "weight_min_kg": 2.0,
          "weight_max_kg": 10.0,
          "rows": 9
        },
        {
          "mgkg_per_day": 50.0,
          "weight_min_kg": 2.0,
          "weight_max_kg": 7.0,
          "rows": 6
        },
        {
          "mgkg_per_day": 90.0,
          "weight_min_kg": 2.0,
          "weight_max_kg": 4.0,
          "rows": 3
        }
      ],
      "therapy_days": null,
      "target_mgkg_per_day": null
    },
    {
      "variant_id": "ospamox_250_5ml",
      "product_id": "ospamox",
      "title_ru": "Дозировочная карта для препарата Оспамокс 250 мг/5 мл в зависимости от массы тела",
      "strength_label_ru": "250 мг/5 мл",
      "dose_basis": "mgkg_per_day",
      "freq_per_day": 2,
      "mgkg_options": [
        40.0,
        50.0
      ],
      "weight_min_kg": 10.0,
      "weight_max_kg": 40.0,
      "coverage_by_mgkg": [
        {
          "mgkg_per_day": 40.0,
          "weight_min_kg": 10.0,
          "weight_max_kg": 40.0,
          "rows": 15
        },
        {
          "mgkg_per_day": 50.0,
          "weight_min_kg": 10.0,
          "weight_max_kg": 15.0,
          "rows": 6
        }
      ],
      "therapy_days": null,
      "target_mgkg_per_day": null
    }
  ],
  "dose_rows": [
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 2.0,
      "weight_max_kg": 2.0,
      "dose_ml": 0.5,
      "freq_per_day": 3,
      "label_raw": "0,5 мл",
      "weight_raw": "2",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 2.0,
      "weight_max_kg": 2.0,
      "dose_ml": 1.0,
      "freq_per_day": 3,
      "label_raw": "1,0 мл",
      "weight_raw": "2",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 2.0,
      "weight_max_kg": 2.0,
      "dose_ml": 1.6,
      "freq_per_day": 3,
      "label_raw": "1,6 мл",
      "weight_raw": "2",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 0.8,
      "freq_per_day": 3,
      "label_raw": "0,8 мл",
      "weight_raw": "3",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 1.6,
      "freq_per_day": 3,
      "label_raw": "1,6 мл",
      "weight_raw": "3",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 2.4,
      "freq_per_day": 3,
      "label_raw": "2,4 мл",
      "weight_raw": "3",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 1.1,
      "freq_per_day": 3,
      "label_raw": "1,1 мл",
      "weight_raw": "4",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 2.1,
      "freq_per_day": 3,
      "label_raw": "2,1 мл",
      "weight_raw": "4",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 3.2,
      "freq_per_day": 3,
      "label_raw": "3,2 мл",
      "weight_raw": "4",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 1.3,
      "freq_per_day": 3,
      "label_raw": "1,3 мл",
      "weight_raw": "5",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 2.7,
      "freq_per_day": 3,
      "label_raw": "2,7 мл",
      "weight_raw": "5",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 4.0,
      "freq_per_day": 3,
      "label_raw": "4 мл",
      "weight_raw": "5",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 1.6,
      "freq_per_day": 3,
      "label_raw": "1,6 мл",
      "weight_raw": "6",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 3.2,
      "freq_per_day": 3,
      "label_raw": "3,2 мл",
      "weight_raw": "6",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 4.8,
      "freq_per_day": 3,
      "label_raw": "4,8 мл",
      "weight_raw": "6",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 1.9,
      "freq_per_day": 3,
      "label_raw": "1,9 мл",
      "weight_raw": "7",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 3.7,
      "freq_per_day": 3,
      "label_raw": "3,7 мл",
      "weight_raw": "7",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 2.1,
      "freq_per_day": 3,
      "label_raw": "2,1 мл",
      "weight_raw": "8",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 4.3,
      "freq_per_day": 3,
      "label_raw": "4,3 мл",
      "weight_raw": "8",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 2.4,
      "freq_per_day": 3,
      "label_raw": "2,4 мл",
      "weight_raw": "9",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 4.8,
      "freq_per_day": 3,
      "label_raw": "4,8 мл",
      "weight_raw": "9",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 2.7,
      "freq_per_day": 3,
      "label_raw": "2,7 мл",
      "weight_raw": "10",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 5.3,
      "freq_per_day": 3,
      "label_raw": "5,3 мл",
      "weight_raw": "10",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 2.9,
      "freq_per_day": 3,
      "label_raw": "2,9 мл",
      "weight_raw": "11",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 5.9,
      "freq_per_day": 3,
      "label_raw": "5,9 мл",
      "weight_raw": "11",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 3.2,
      "freq_per_day": 3,
      "label_raw": "3,2 мл",
      "weight_raw": "12",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 6.4,
      "freq_per_day": 3,
      "label_raw": "6,4 мл",
      "weight_raw": "12",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 3.5,
      "freq_per_day": 3,
      "label_raw": "3,5 мл",
      "weight_raw": "13",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 6.9,
      "freq_per_day": 3,
      "label_raw": "6,9 мл",
      "weight_raw": "13",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 3.7,
      "freq_per_day": 3,
      "label_raw": "3,7 мл",
      "weight_raw": "14",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 7.5,
      "freq_per_day": 3,
      "label_raw": "7,5 мл",
      "weight_raw": "14",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 4.0,
      "freq_per_day": 3,
      "label_raw": "4,0 мл",
      "weight_raw": "15",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 8.0,
      "freq_per_day": 3,
      "label_raw": "8,0 мл",
      "weight_raw": "15",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 16.0,
      "weight_max_kg": 16.0,
      "dose_ml": 4.3,
      "freq_per_day": 3,
      "label_raw": "4,3 мл",
      "weight_raw": "16",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 16.0,
      "weight_max_kg": 16.0,
      "dose_ml": 8.5,
      "freq_per_day": 3,
      "label_raw": "8,5 мл",
      "weight_raw": "16",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 17.0,
      "weight_max_kg": 17.0,
      "dose_ml": 4.5,
      "freq_per_day": 3,
      "label_raw": "4,5 мл",
      "weight_raw": "17",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 17.0,
      "weight_max_kg": 17.0,
      "dose_ml": 9.1,
      "freq_per_day": 3,
      "label_raw": "9,1 мл",
      "weight_raw": "17",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 18.0,
      "weight_max_kg": 18.0,
      "dose_ml": 4.8,
      "freq_per_day": 3,
      "label_raw": "4,8 мл",
      "weight_raw": "18",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 18.0,
      "weight_max_kg": 18.0,
      "dose_ml": 9.6,
      "freq_per_day": 3,
      "label_raw": "9,6 мл",
      "weight_raw": "18",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 19.0,
      "weight_max_kg": 19.0,
      "dose_ml": 5.1,
      "freq_per_day": 3,
      "label_raw": "5,1 мл",
      "weight_raw": "19",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 19.0,
      "weight_max_kg": 19.0,
      "dose_ml": 10.1,
      "freq_per_day": 3,
      "label_raw": "10,1 мл",
      "weight_raw": "19",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 5.3,
      "freq_per_day": 3,
      "label_raw": "5,3 мл",
      "weight_raw": "20",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_156_25_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 10.7,
      "freq_per_day": 3,
      "label_raw": "10,7 мл",
      "weight_raw": "20",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 0.4,
      "freq_per_day": 3,
      "label_raw": "0.4",
      "weight_raw": "3",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 0.8,
      "freq_per_day": 3,
      "label_raw": "0.8",
      "weight_raw": "3",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 1.2,
      "freq_per_day": 3,
      "label_raw": "1.2",
      "weight_raw": "3",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 0.5,
      "freq_per_day": 3,
      "label_raw": "0.5",
      "weight_raw": "4",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 1.1,
      "freq_per_day": 3,
      "label_raw": "1.1",
      "weight_raw": "4",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 1.6,
      "freq_per_day": 3,
      "label_raw": "1.6",
      "weight_raw": "4",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 0.7,
      "freq_per_day": 3,
      "label_raw": "0.7",
      "weight_raw": "5",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 1.3,
      "freq_per_day": 3,
      "label_raw": "1.3",
      "weight_raw": "5",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 2.0,
      "freq_per_day": 3,
      "label_raw": "2",
      "weight_raw": "5",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 0.8,
      "freq_per_day": 3,
      "label_raw": "0.8",
      "weight_raw": "6",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 1.6,
      "freq_per_day": 3,
      "label_raw": "1.6",
      "weight_raw": "6",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 2.4,
      "freq_per_day": 3,
      "label_raw": "2.4",
      "weight_raw": "6",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 0.9,
      "freq_per_day": 3,
      "label_raw": "0.9",
      "weight_raw": "7",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 1.9,
      "freq_per_day": 3,
      "label_raw": "1.9",
      "weight_raw": "7",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 2.8,
      "freq_per_day": 3,
      "label_raw": "2.8",
      "weight_raw": "7",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 1.1,
      "freq_per_day": 3,
      "label_raw": "1.1",
      "weight_raw": "8",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 2.1,
      "freq_per_day": 3,
      "label_raw": "2.1",
      "weight_raw": "8",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 3.2,
      "freq_per_day": 3,
      "label_raw": "3.2",
      "weight_raw": "8",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 1.2,
      "freq_per_day": 3,
      "label_raw": "1.2",
      "weight_raw": "9",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 2.4,
      "freq_per_day": 3,
      "label_raw": "2.4",
      "weight_raw": "9",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 3.6,
      "freq_per_day": 3,
      "label_raw": "3.6",
      "weight_raw": "9",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 1.3,
      "freq_per_day": 3,
      "label_raw": "1.3",
      "weight_raw": "10",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 2.7,
      "freq_per_day": 3,
      "label_raw": "2.7",
      "weight_raw": "10",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 4.0,
      "freq_per_day": 3,
      "label_raw": "4",
      "weight_raw": "10",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 1.5,
      "freq_per_day": 3,
      "label_raw": "1.5",
      "weight_raw": "11",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 2.9,
      "freq_per_day": 3,
      "label_raw": "2.9",
      "weight_raw": "11",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 4.4,
      "freq_per_day": 3,
      "label_raw": "4.4",
      "weight_raw": "11",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 1.6,
      "freq_per_day": 3,
      "label_raw": "1.6",
      "weight_raw": "12",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 3.2,
      "freq_per_day": 3,
      "label_raw": "3.2",
      "weight_raw": "12",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 4.8,
      "freq_per_day": 3,
      "label_raw": "4.8",
      "weight_raw": "12",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 1.7,
      "freq_per_day": 3,
      "label_raw": "1.7",
      "weight_raw": "13",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 3.5,
      "freq_per_day": 3,
      "label_raw": "3.5",
      "weight_raw": "13",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 5.2,
      "freq_per_day": 3,
      "label_raw": "5.2",
      "weight_raw": "13",
      "mgkg_per_day": 60.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 1.9,
      "freq_per_day": 3,
      "label_raw": "1.9",
      "weight_raw": "14",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 3.7,
      "freq_per_day": 3,
      "label_raw": "3.7",
      "weight_raw": "14",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 2.0,
      "freq_per_day": 3,
      "label_raw": "2",
      "weight_raw": "15",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 4.0,
      "freq_per_day": 3,
      "label_raw": "4",
      "weight_raw": "15",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 16.0,
      "weight_max_kg": 16.0,
      "dose_ml": 2.1,
      "freq_per_day": 3,
      "label_raw": "2.1",
      "weight_raw": "16",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 16.0,
      "weight_max_kg": 16.0,
      "dose_ml": 4.3,
      "freq_per_day": 3,
      "label_raw": "4.3",
      "weight_raw": "16",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 17.0,
      "weight_max_kg": 17.0,
      "dose_ml": 2.3,
      "freq_per_day": 3,
      "label_raw": "2.3",
      "weight_raw": "17",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 17.0,
      "weight_max_kg": 17.0,
      "dose_ml": 4.5,
      "freq_per_day": 3,
      "label_raw": "4.5",
      "weight_raw": "17",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 18.0,
      "weight_max_kg": 18.0,
      "dose_ml": 2.4,
      "freq_per_day": 3,
      "label_raw": "2.4",
      "weight_raw": "18",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 18.0,
      "weight_max_kg": 18.0,
      "dose_ml": 4.8,
      "freq_per_day": 3,
      "label_raw": "4.8",
      "weight_raw": "18",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 19.0,
      "weight_max_kg": 19.0,
      "dose_ml": 2.5,
      "freq_per_day": 3,
      "label_raw": "2.5",
      "weight_raw": "19",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 19.0,
      "weight_max_kg": 19.0,
      "dose_ml": 5.1,
      "freq_per_day": 3,
      "label_raw": "5.1",
      "weight_raw": "19",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 2.7,
      "freq_per_day": 3,
      "label_raw": "2.7",
      "weight_raw": "20",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 5.3,
      "freq_per_day": 3,
      "label_raw": "5.3",
      "weight_raw": "20",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 21.0,
      "weight_max_kg": 21.0,
      "dose_ml": 2.8,
      "freq_per_day": 3,
      "label_raw": "2.8",
      "weight_raw": "21",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 21.0,
      "weight_max_kg": 21.0,
      "dose_ml": 5.6,
      "freq_per_day": 3,
      "label_raw": "5.6",
      "weight_raw": "21",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 22.0,
      "weight_max_kg": 22.0,
      "dose_ml": 2.9,
      "freq_per_day": 3,
      "label_raw": "2.9",
      "weight_raw": "22",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 22.0,
      "weight_max_kg": 22.0,
      "dose_ml": 5.9,
      "freq_per_day": 3,
      "label_raw": "5.9",
      "weight_raw": "22",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 23.0,
      "weight_max_kg": 23.0,
      "dose_ml": 3.1,
      "freq_per_day": 3,
      "label_raw": "3.1",
      "weight_raw": "23",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 23.0,
      "weight_max_kg": 23.0,
      "dose_ml": 6.1,
      "freq_per_day": 3,
      "label_raw": "6.1",
      "weight_raw": "23",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 24.0,
      "weight_max_kg": 24.0,
      "dose_ml": 3.2,
      "freq_per_day": 3,
      "label_raw": "3.2",
      "weight_raw": "24",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 24.0,
      "weight_max_kg": 24.0,
      "dose_ml": 6.4,
      "freq_per_day": 3,
      "label_raw": "6.4",
      "weight_raw": "24",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 25.0,
      "weight_max_kg": 25.0,
      "dose_ml": 3.3,
      "freq_per_day": 3,
      "label_raw": "3.3",
      "weight_raw": "25",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 25.0,
      "weight_max_kg": 25.0,
      "dose_ml": 6.7,
      "freq_per_day": 3,
      "label_raw": "6.7",
      "weight_raw": "25",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 26.0,
      "weight_max_kg": 26.0,
      "dose_ml": 3.5,
      "freq_per_day": 3,
      "label_raw": "3.5",
      "weight_raw": "26",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 26.0,
      "weight_max_kg": 26.0,
      "dose_ml": 6.9,
      "freq_per_day": 3,
      "label_raw": "6.9",
      "weight_raw": "26",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 27.0,
      "weight_max_kg": 27.0,
      "dose_ml": 3.6,
      "freq_per_day": 3,
      "label_raw": "3.6",
      "weight_raw": "27",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 27.0,
      "weight_max_kg": 27.0,
      "dose_ml": 7.2,
      "freq_per_day": 3,
      "label_raw": "7.2",
      "weight_raw": "27",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 28.0,
      "weight_max_kg": 28.0,
      "dose_ml": 3.7,
      "freq_per_day": 3,
      "label_raw": "3.7",
      "weight_raw": "28",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 28.0,
      "weight_max_kg": 28.0,
      "dose_ml": 7.5,
      "freq_per_day": 3,
      "label_raw": "7.5",
      "weight_raw": "28",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 29.0,
      "weight_max_kg": 29.0,
      "dose_ml": 3.9,
      "freq_per_day": 3,
      "label_raw": "3.9",
      "weight_raw": "29",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 29.0,
      "weight_max_kg": 29.0,
      "dose_ml": 7.7,
      "freq_per_day": 3,
      "label_raw": "7.7",
      "weight_raw": "29",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 30.0,
      "weight_max_kg": 30.0,
      "dose_ml": 4.0,
      "freq_per_day": 3,
      "label_raw": "4",
      "weight_raw": "30",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 30.0,
      "weight_max_kg": 30.0,
      "dose_ml": 8.0,
      "freq_per_day": 3,
      "label_raw": "8",
      "weight_raw": "30",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 31.0,
      "weight_max_kg": 31.0,
      "dose_ml": 4.1,
      "freq_per_day": 3,
      "label_raw": "4.1",
      "weight_raw": "31",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 31.0,
      "weight_max_kg": 31.0,
      "dose_ml": 8.3,
      "freq_per_day": 3,
      "label_raw": "8.3",
      "weight_raw": "31",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 32.0,
      "weight_max_kg": 32.0,
      "dose_ml": 4.3,
      "freq_per_day": 3,
      "label_raw": "4.3",
      "weight_raw": "32",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 32.0,
      "weight_max_kg": 32.0,
      "dose_ml": 8.5,
      "freq_per_day": 3,
      "label_raw": "8.5",
      "weight_raw": "32",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 33.0,
      "weight_max_kg": 33.0,
      "dose_ml": 4.4,
      "freq_per_day": 3,
      "label_raw": "4.4",
      "weight_raw": "33",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 33.0,
      "weight_max_kg": 33.0,
      "dose_ml": 8.8,
      "freq_per_day": 3,
      "label_raw": "8.8",
      "weight_raw": "33",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 34.0,
      "weight_max_kg": 34.0,
      "dose_ml": 4.5,
      "freq_per_day": 3,
      "label_raw": "4.5",
      "weight_raw": "34",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 34.0,
      "weight_max_kg": 34.0,
      "dose_ml": 9.1,
      "freq_per_day": 3,
      "label_raw": "9.1",
      "weight_raw": "34",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 35.0,
      "weight_max_kg": 35.0,
      "dose_ml": 4.7,
      "freq_per_day": 3,
      "label_raw": "4.7",
      "weight_raw": "35",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 35.0,
      "weight_max_kg": 35.0,
      "dose_ml": 9.3,
      "freq_per_day": 3,
      "label_raw": "9.3",
      "weight_raw": "35",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 36.0,
      "weight_max_kg": 36.0,
      "dose_ml": 4.8,
      "freq_per_day": 3,
      "label_raw": "4.8",
      "weight_raw": "36",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 36.0,
      "weight_max_kg": 36.0,
      "dose_ml": 9.6,
      "freq_per_day": 3,
      "label_raw": "9.6",
      "weight_raw": "36",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 37.0,
      "weight_max_kg": 37.0,
      "dose_ml": 4.9,
      "freq_per_day": 3,
      "label_raw": "4.9",
      "weight_raw": "37",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 37.0,
      "weight_max_kg": 37.0,
      "dose_ml": 9.9,
      "freq_per_day": 3,
      "label_raw": "9.9",
      "weight_raw": "37",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 38.0,
      "weight_max_kg": 38.0,
      "dose_ml": 5.1,
      "freq_per_day": 3,
      "label_raw": "5.1",
      "weight_raw": "38",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 38.0,
      "weight_max_kg": 38.0,
      "dose_ml": 10.1,
      "freq_per_day": 3,
      "label_raw": "10.1",
      "weight_raw": "38",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 39.0,
      "weight_max_kg": 39.0,
      "dose_ml": 5.2,
      "freq_per_day": 3,
      "label_raw": "5.2",
      "weight_raw": "39",
      "mgkg_per_day": 20.0
    },
    {
      "variant_id": "amoxiclav_312_5_5ml",
      "weight_min_kg": 39.0,
      "weight_max_kg": 39.0,
      "dose_ml": 10.4,
      "freq_per_day": 3,
      "label_raw": "10.4",
      "weight_raw": "39",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 0.8,
      "freq_per_day": 2,
      "label_raw": "0,8 мл 2 раза в сутки",
      "weight_raw": "5",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 1.4,
      "freq_per_day": 2,
      "label_raw": "1,4 мл 2 раза в сутки",
      "weight_raw": "5",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 0.9,
      "freq_per_day": 2,
      "label_raw": "0,9 мл 2 раза в сутки",
      "weight_raw": "6",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 1.7,
      "freq_per_day": 2,
      "label_raw": "1,7 мл 2 раза в сутки",
      "weight_raw": "6",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 1.1,
      "freq_per_day": 2,
      "label_raw": "1,1 мл 2 раза в сутки",
      "weight_raw": "7",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 2.0,
      "freq_per_day": 2,
      "label_raw": "2,0 мл 2 раза в сутки",
      "weight_raw": "7",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 1.3,
      "freq_per_day": 2,
      "label_raw": "1,3 мл 2 раза в сутки",
      "weight_raw": "8",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 2.3,
      "freq_per_day": 2,
      "label_raw": "2,3 мл 2 раза в сутки",
      "weight_raw": "8",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 1.4,
      "freq_per_day": 2,
      "label_raw": "1,4 мл 2 раза в сутки",
      "weight_raw": "9",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 2.5,
      "freq_per_day": 2,
      "label_raw": "2,5 мл 2 раза в сутки",
      "weight_raw": "9",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 1.6,
      "freq_per_day": 2,
      "label_raw": "1,6 мл 2 раза в сутки",
      "weight_raw": "10",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 2.8,
      "freq_per_day": 2,
      "label_raw": "2,8 мл 2 раза в сутки",
      "weight_raw": "10",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 1.7,
      "freq_per_day": 2,
      "label_raw": "1,7 мл 2 раза в сутки",
      "weight_raw": "11",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 3.1,
      "freq_per_day": 2,
      "label_raw": "3,1 мл 2 раза в сутки",
      "weight_raw": "11",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 1.9,
      "freq_per_day": 2,
      "label_raw": "1,9 мл 2 раза в сутки",
      "weight_raw": "12",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 3.4,
      "freq_per_day": 2,
      "label_raw": "3,4 мл 2 раза в сутки",
      "weight_raw": "12",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 2.0,
      "freq_per_day": 2,
      "label_raw": "2,0 мл 2 раза в сутки",
      "weight_raw": "13",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 3.7,
      "freq_per_day": 2,
      "label_raw": "3,7 мл 2 раза в сутки",
      "weight_raw": "13",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 5.7,
      "freq_per_day": 2,
      "label_raw": "5,7 мл 2 раза в сутки",
      "weight_raw": "13",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 2.2,
      "freq_per_day": 2,
      "label_raw": "2,2 мл 2 раза в сутки",
      "weight_raw": "14",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 3.9,
      "freq_per_day": 2,
      "label_raw": "3,9 мл 2 раза в сутки",
      "weight_raw": "14",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 6.0,
      "freq_per_day": 2,
      "label_raw": "6,0 мл 2 раза в сутки",
      "weight_raw": "14",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 2.3,
      "freq_per_day": 2,
      "label_raw": "2,3 мл 2 раза в сутки",
      "weight_raw": "15",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 4.2,
      "freq_per_day": 2,
      "label_raw": "4,2 мл 2 раза в сутки",
      "weight_raw": "15",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 6.5,
      "freq_per_day": 2,
      "label_raw": "6,5 мл 2 раза в сутки",
      "weight_raw": "15",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 3.1,
      "freq_per_day": 2,
      "label_raw": "3,1 мл 2 раза в сутки",
      "weight_raw": "20",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 5.6,
      "freq_per_day": 2,
      "label_raw": "5,6 мл 2 раза в сутки",
      "weight_raw": "20",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 8.8,
      "freq_per_day": 2,
      "label_raw": "8,8 мл 2 раза в сутки",
      "weight_raw": "20",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 25.0,
      "weight_max_kg": 25.0,
      "dose_ml": 4.0,
      "freq_per_day": 2,
      "label_raw": "4,0 мл 2 раза в сутки",
      "weight_raw": "25",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 25.0,
      "weight_max_kg": 25.0,
      "dose_ml": 7.0,
      "freq_per_day": 2,
      "label_raw": "7,0 мл 2 раза в сутки",
      "weight_raw": "25",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 25.0,
      "weight_max_kg": 25.0,
      "dose_ml": 11.0,
      "freq_per_day": 2,
      "label_raw": "11 мл 2 раза в сутки",
      "weight_raw": "25",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 30.0,
      "weight_max_kg": 30.0,
      "dose_ml": 4.7,
      "freq_per_day": 2,
      "label_raw": "4,7 мл",
      "weight_raw": "30",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 30.0,
      "weight_max_kg": 30.0,
      "dose_ml": 8.5,
      "freq_per_day": 2,
      "label_raw": "8,5 мл",
      "weight_raw": "30",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 30.0,
      "weight_max_kg": 30.0,
      "dose_ml": 13.0,
      "freq_per_day": 2,
      "label_raw": "13 мл",
      "weight_raw": "30",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 35.0,
      "weight_max_kg": 35.0,
      "dose_ml": 5.5,
      "freq_per_day": 2,
      "label_raw": "5,5 мл",
      "weight_raw": "35",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 35.0,
      "weight_max_kg": 35.0,
      "dose_ml": 9.8,
      "freq_per_day": 2,
      "label_raw": "9,8 мл",
      "weight_raw": "35",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 35.0,
      "weight_max_kg": 35.0,
      "dose_ml": 15.3,
      "freq_per_day": 2,
      "label_raw": "15,3 мл",
      "weight_raw": "35",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 40.0,
      "weight_max_kg": 40.0,
      "dose_ml": 6.3,
      "freq_per_day": 2,
      "label_raw": "6,3 мл",
      "weight_raw": "40",
      "mgkg_per_day": 25.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 40.0,
      "weight_max_kg": 40.0,
      "dose_ml": 11.3,
      "freq_per_day": 2,
      "label_raw": "11,3 мл",
      "weight_raw": "40",
      "mgkg_per_day": 45.0
    },
    {
      "variant_id": "amoxiclav_457_5ml",
      "weight_min_kg": 40.0,
      "weight_max_kg": 40.0,
      "dose_ml": 17.5,
      "freq_per_day": 2,
      "label_raw": "17,5 мл",
      "weight_raw": "40",
      "mgkg_per_day": 70.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 2.0,
      "weight_max_kg": 2.0,
      "dose_ml": 1.6,
      "freq_per_day": 2,
      "label_raw": "1,6 мл",
      "weight_raw": "2",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 2.0,
      "weight_max_kg": 2.0,
      "dose_ml": 2.0,
      "freq_per_day": 2,
      "label_raw": "2 мл",
      "weight_raw": "2",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 2.0,
      "weight_max_kg": 2.0,
      "dose_ml": 3.6,
      "freq_per_day": 2,
      "label_raw": "3,6 мл",
      "weight_raw": "2",
      "mgkg_per_day": 90.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 2.4,
      "freq_per_day": 2,
      "label_raw": "2,4 мл",
      "weight_raw": "3",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 3.0,
      "freq_per_day": 2,
      "label_raw": "3 мл",
      "weight_raw": "3",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 3.0,
      "weight_max_kg": 3.0,
      "dose_ml": 5.4,
      "freq_per_day": 2,
      "label_raw": "5,4 мл",
      "weight_raw": "3",
      "mgkg_per_day": 90.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 3.2,
      "freq_per_day": 2,
      "label_raw": "3,2 мл",
      "weight_raw": "4",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 4.0,
      "freq_per_day": 2,
      "label_raw": "4 мл",
      "weight_raw": "4",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 4.0,
      "weight_max_kg": 4.0,
      "dose_ml": 7.2,
      "freq_per_day": 2,
      "label_raw": "7,2 мл",
      "weight_raw": "4",
      "mgkg_per_day": 90.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 4.0,
      "freq_per_day": 2,
      "label_raw": "4 мл",
      "weight_raw": "5",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 5.0,
      "freq_per_day": 2,
      "label_raw": "5 мл",
      "weight_raw": "5",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 4.8,
      "freq_per_day": 2,
      "label_raw": "4,8 мл",
      "weight_raw": "6",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 6.0,
      "freq_per_day": 2,
      "label_raw": "6 мл",
      "weight_raw": "6",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 5.6,
      "freq_per_day": 2,
      "label_raw": "5,6 мл",
      "weight_raw": "7",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 7.0,
      "freq_per_day": 2,
      "label_raw": "7 мл",
      "weight_raw": "7",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 6.4,
      "freq_per_day": 2,
      "label_raw": "6,4 мл",
      "weight_raw": "8",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 7.2,
      "freq_per_day": 2,
      "label_raw": "7,2 мл",
      "weight_raw": "9",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_125_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 8.0,
      "freq_per_day": 2,
      "label_raw": "8 мл",
      "weight_raw": "10",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 4.0,
      "freq_per_day": 2,
      "label_raw": "4 мл",
      "weight_raw": "10",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 5.0,
      "freq_per_day": 2,
      "label_raw": "5 мл",
      "weight_raw": "10",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 4.4,
      "freq_per_day": 2,
      "label_raw": "4,4 мл",
      "weight_raw": "11",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 5.5,
      "freq_per_day": 2,
      "label_raw": "5,5 мл",
      "weight_raw": "11",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 4.8,
      "freq_per_day": 2,
      "label_raw": "4,8 мл",
      "weight_raw": "12",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 6.0,
      "freq_per_day": 2,
      "label_raw": "6 мл",
      "weight_raw": "12",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 5.2,
      "freq_per_day": 2,
      "label_raw": "5,2 мл",
      "weight_raw": "13",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 6.5,
      "freq_per_day": 2,
      "label_raw": "6,5 мл",
      "weight_raw": "13",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 5.6,
      "freq_per_day": 2,
      "label_raw": "5,6 мл",
      "weight_raw": "14",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 7.0,
      "freq_per_day": 2,
      "label_raw": "7 мл",
      "weight_raw": "14",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 6.0,
      "freq_per_day": 2,
      "label_raw": "6 мл",
      "weight_raw": "15",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 15.0,
      "dose_ml": 7.5,
      "freq_per_day": 2,
      "label_raw": "7,5 мл",
      "weight_raw": "15",
      "mgkg_per_day": 50.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 16.0,
      "weight_max_kg": 16.0,
      "dose_ml": 6.4,
      "freq_per_day": 2,
      "label_raw": "6,4 мл",
      "weight_raw": "16",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 17.0,
      "weight_max_kg": 17.0,
      "dose_ml": 6.8,
      "freq_per_day": 2,
      "label_raw": "6,8 мл",
      "weight_raw": "17",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 18.0,
      "weight_max_kg": 18.0,
      "dose_ml": 7.2,
      "freq_per_day": 2,
      "label_raw": "7,2 мл",
      "weight_raw": "18",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 19.0,
      "weight_max_kg": 19.0,
      "dose_ml": 7.6,
      "freq_per_day": 2,
      "label_raw": "7,6 мл",
      "weight_raw": "19",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 20.0,
      "weight_max_kg": 20.0,
      "dose_ml": 8.0,
      "freq_per_day": 2,
      "label_raw": "8 мл",
      "weight_raw": "20",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 25.0,
      "weight_max_kg": 25.0,
      "dose_ml": 10.0,
      "freq_per_day": 2,
      "label_raw": "10 мл",
      "weight_raw": "25",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 30.0,
      "weight_max_kg": 30.0,
      "dose_ml": 12.0,
      "freq_per_day": 2,
      "label_raw": "12 мл",
      "weight_raw": "30",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 35.0,
      "weight_max_kg": 35.0,
      "dose_ml": 14.0,
      "freq_per_day": 2,
      "label_raw": "14 мл",
      "weight_raw": "35",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "ospamox_250_5ml",
      "weight_min_kg": 40.0,
      "weight_max_kg": 40.0,
      "dose_ml": 16.0,
      "freq_per_day": 2,
      "label_raw": "16 мл",
      "weight_raw": "40",
      "mgkg_per_day": 40.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 5.0,
      "weight_max_kg": 5.0,
      "dose_ml": 2.5,
      "freq_per_day": 1,
      "label_raw": "2,5 мл 1 раз в день",
      "weight_raw": "5 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 50.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 6.0,
      "weight_max_kg": 6.0,
      "dose_ml": 3.0,
      "freq_per_day": 1,
      "label_raw": "3 мл 1 раз в день",
      "weight_raw": "6 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 60.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 7.0,
      "weight_max_kg": 7.0,
      "dose_ml": 3.5,
      "freq_per_day": 1,
      "label_raw": "3,5 мл 1 раза в день",
      "weight_raw": "7 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 70.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 8.0,
      "weight_max_kg": 8.0,
      "dose_ml": 4.0,
      "freq_per_day": 1,
      "label_raw": "4 мл 1 раз в день",
      "weight_raw": "8 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 80.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 9.0,
      "weight_max_kg": 9.0,
      "dose_ml": 4.5,
      "freq_per_day": 1,
      "label_raw": "4,5 мл 1 раз в день",
      "weight_raw": "9 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 90.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 5.0,
      "freq_per_day": 1,
      "label_raw": "5 мл 1 раз в день",
      "weight_raw": "10 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 100.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 5.5,
      "freq_per_day": 1,
      "label_raw": "5,5 мл 1 раз в день",
      "weight_raw": "11 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 110.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 6.0,
      "freq_per_day": 1,
      "label_raw": "6 мл 1 раз в день",
      "weight_raw": "12 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 120.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 6.5,
      "freq_per_day": 1,
      "label_raw": "6,5 мл 1 раз в день",
      "weight_raw": "13 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 130.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 7.0,
      "freq_per_day": 1,
      "label_raw": "7 мл 1 раз в день",
      "weight_raw": "14 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 140.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 25.0,
      "dose_ml": 10.0,
      "freq_per_day": 1,
      "label_raw": "10 мл (200 мг азитромицина 1 раз в день)",
      "weight_raw": "15-25 кг       (3-7 лет)",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 200.0,
      "dose_mg_from_text": 200.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 26.0,
      "weight_max_kg": 35.0,
      "dose_ml": 15.0,
      "freq_per_day": 1,
      "label_raw": "15 мл (300 мг азитромицина 1 раз в день)",
      "weight_raw": "26-35 кг            (8-11 лет)",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 300.0,
      "dose_mg_from_text": 300.0
    },
    {
      "variant_id": "azidrat_100_5ml",
      "weight_min_kg": 36.0,
      "weight_max_kg": 45.0,
      "dose_ml": 20.0,
      "freq_per_day": 1,
      "label_raw": "20 мл (400 мг азитромицина 1 раз в день)",
      "weight_raw": "36-45 кг      (12-14 лет)",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 400.0,
      "dose_mg_from_text": 400.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 10.0,
      "weight_max_kg": 10.0,
      "dose_ml": 2.5,
      "freq_per_day": 1,
      "label_raw": "2,5 мл 1 раз в день",
      "weight_raw": "10 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 100.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 11.0,
      "weight_max_kg": 11.0,
      "dose_ml": 2.75,
      "freq_per_day": 1,
      "label_raw": "2,75 мл 1 раз в день",
      "weight_raw": "11 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 110.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 12.0,
      "weight_max_kg": 12.0,
      "dose_ml": 3.0,
      "freq_per_day": 1,
      "label_raw": "3 мл 1 раз в день",
      "weight_raw": "12 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 120.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 13.0,
      "weight_max_kg": 13.0,
      "dose_ml": 3.25,
      "freq_per_day": 1,
      "label_raw": "3,25 мл 1 раз в день",
      "weight_raw": "13 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 130.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 14.0,
      "weight_max_kg": 14.0,
      "dose_ml": 4.0,
      "freq_per_day": 1,
      "label_raw": "4 мл 1 раз в день",
      "weight_raw": "14 кг",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 160.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 15.0,
      "weight_max_kg": 25.0,
      "dose_ml": 5.0,
      "freq_per_day": 1,
      "label_raw": "5 мл (200 мг азитромицина   1 раз в день)",
      "weight_raw": "15-25 кг       (3-7 лет)",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 200.0,
      "dose_mg_from_text": 200.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 26.0,
      "weight_max_kg": 35.0,
      "dose_ml": 7.5,
      "freq_per_day": 1,
      "label_raw": "7,5 мл (300 мг азитромицина 1 раз в день)",
      "weight_raw": "26-35 кг            (8-11 лет)",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 300.0,
      "dose_mg_from_text": 300.0
    },
    {
      "variant_id": "azidrat_200_5ml",
      "weight_min_kg": 36.0,
      "weight_max_kg": 45.0,
      "dose_ml": 10.0,
      "freq_per_day": 1,
      "label_raw": "10 мл (400 мг азитромицина 1 раз в день)",
      "weight_raw": "36-45 кг      (12-14 лет)",
      "therapy_label": "3-дневная терапия                                 (мл, 10 мг/кг/сутки)",
      "dose_mg_calc": 400.0,
      "dose_mg_from_text": 400.0
    }
  ]
}</script>

  <script>
  (() => {
    "use strict";

    // ---------- Data ----------
    const registry = JSON.parse(document.getElementById("registryData").textContent);

    const products = registry.products || [];
    const variants = registry.variants || [];
    const doseRows = registry.dose_rows || [];

    const productsById = new Map(products.map(p => [p.product_id, p]));
    const variantsByProduct = groupBy(variants, v => v.product_id);

    // Build per-variant index for fast lookup
    const doseIndexByVariant = new Map();
    for (const v of variants) {
      const rows = doseRows.filter(r => r.variant_id === v.variant_id);
      doseIndexByVariant.set(v.variant_id, buildDoseIndex(rows));
    }

    // ---------- State ----------
    const DISPLAY_MIN = 2;
    const DISPLAY_MAX = 45;

    const state = {
      product_id: products[0]?.product_id ?? null,
      variant_id: null,
      weight_kg: null,
      mgkg_per_day: null,
      showAllTable: false
    };

    // ---------- Elements ----------
    const productSeg = document.getElementById("productSeg");
    const variantTiles = document.getElementById("variantTiles");
    const mgkgField = document.getElementById("mgkgField");
    const mgkgChips = document.getElementById("mgkgChips");

    const weightRange = document.getElementById("weightRange");
    const weightInput = document.getElementById("weightInput");
    const weightHint = document.getElementById("weightHint");

    const rotor = document.getElementById("rotor");
    const windowsEl = document.getElementById("windows");
    const badgeProduct = document.getElementById("badgeProduct");
    const badgeVariant = document.getElementById("badgeVariant");

    const doseMlEl = document.getElementById("doseMl");
    const freqEl = document.getElementById("freq");
    const dailyEl = document.getElementById("daily");
    const noteEl = document.getElementById("note");
    const copyBtn = document.getElementById("copyBtn");

    const courseLine = document.getElementById("courseLine");
    const courseEl = document.getElementById("course");
    const regimenLine = document.getElementById("regimenLine");
    const regimenEl = document.getElementById("regimen");

    const checkBtn = document.getElementById("checkBtn");
    const toast = document.getElementById("toast");

    // Drawer
    const drawer = document.getElementById("drawer");
    const drawerBackdrop = document.getElementById("drawerBackdrop");
    const drawerTbody = document.getElementById("drawerTbody");
    const drawerSub = document.getElementById("drawerSub");
    const drawerNote = document.getElementById("drawerNote");
    const closeDrawer = document.getElementById("closeDrawer");
    const toggleAll = document.getElementById("toggleAll");

    // Modal
    const infoBtn = document.getElementById("infoBtn");
    const modalBackdrop = document.getElementById("modalBackdrop");
    const closeModal = document.getElementById("closeModal");

    // ---------- Init wheel drawing ----------
    drawWheelBase();

    // ---------- Init UI ----------
    initProductsUI();
    loadState();
    setProduct(state.product_id, /*silent*/true);

    // ---------- Wiring ----------
    weightRange.addEventListener("input", () => setWeight(parseInt(weightRange.value, 10), "range"));
    weightInput.addEventListener("change", () => setWeight(clampAndNormalizeWeight(weightInput.value), "input"));
    weightInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setWeight(clampAndNormalizeWeight(weightInput.value), "input");
        weightInput.blur();
      }
    });

    copyBtn.addEventListener("click", async () => {
      const text = buildCopyText();
      if (!text) return;
      try {
        await navigator.clipboard.writeText(text);
        showToast("Скопировано");
      } catch (err) {
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        showToast("Скопировано");
      }
    });

    checkBtn.addEventListener("click", () => openDrawer(true));
    closeDrawer.addEventListener("click", () => openDrawer(false));
    drawerBackdrop.addEventListener("click", () => openDrawer(false));

    toggleAll.addEventListener("click", () => {
      state.showAllTable = !state.showAllTable;
      toggleAll.textContent = state.showAllTable ? "Показать рядом с весом" : "Показать всю таблицу";
      renderDrawer();
    });

    infoBtn.addEventListener("click", () => openModal(true));
    closeModal.addEventListener("click", () => openModal(false));
    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) openModal(false);
    });

    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        if (modalBackdrop.classList.contains("open")) openModal(false);
        if (drawer.classList.contains("open")) openDrawer(false);
      }
    });

    // ---------- Core render ----------
    function renderAll() {
      const v = getSelectedVariant();
      if (!v) return;

      // segmented pressed states
      [...productSeg.children].forEach(btn => {
        const id = btn.dataset.productId;
        btn.setAttribute("aria-pressed", id === state.product_id ? "true" : "false");
      });

      renderVariants();
      renderMgkg();
      syncWeightControls();
      renderWheel(v);
      renderResult(v);

      if (drawer.classList.contains("open")) renderDrawer();
      persistState();
    }

    // ---------- UI builders ----------
    function initProductsUI() {
      productSeg.innerHTML = "";
      for (const p of products) {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = p.brand_ru;
        btn.dataset.productId = p.product_id;
        btn.setAttribute("aria-pressed", "false");
        btn.addEventListener("click", () => setProduct(p.product_id));
        productSeg.appendChild(btn);
      }
    }

    function renderVariants() {
      const list = variantsByProduct.get(state.product_id) || [];
      variantTiles.innerHTML = "";
      for (const v of list) {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "tile";
        b.setAttribute("aria-pressed", v.variant_id === state.variant_id ? "true" : "false");
        b.innerHTML = `
          <div class="t">${escapeHtml(v.strength_label_ru || v.title_ru)}</div>
          <div class="d">${escapeHtml(shortTitle(v.title_ru || ""))}</div>
        `;
        b.addEventListener("click", () => setVariant(v.variant_id));
        variantTiles.appendChild(b);
      }
    }

    function renderMgkg() {
      const v = getSelectedVariant();
      if (!v) return;

      mgkgChips.innerHTML = "";

      if (v.dose_basis !== "mgkg_per_day" || !Array.isArray(v.mgkg_options) || v.mgkg_options.length === 0) {
        mgkgField.style.display = "none";
        regimenLine.style.display = "none";
        return;
      }

      mgkgField.style.display = "grid";

      const avail = new Set(getAvailableMgkg(v, state.weight_kg));

      for (const opt of v.mgkg_options) {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "chip";
        btn.textContent = String(opt).replace(/\.0$/, "");
        btn.setAttribute("aria-pressed", (opt === state.mgkg_per_day) ? "true" : "false");
        btn.disabled = !avail.has(opt);
        btn.title = btn.disabled ? "Нет по карте для этого веса" : "";
        btn.addEventListener("click", () => setMgkg(opt));
        mgkgChips.appendChild(btn);
      }

      regimenLine.style.display = "flex";
      regimenEl.textContent = `${formatMgkg(state.mgkg_per_day)} мг/кг/сут`;
    }

    function syncWeightControls() {
      const v = getSelectedVariant();
      if (!v) return;

      const minW = Math.round(v.weight_min_kg);
      const maxW = Math.round(v.weight_max_kg);

      weightRange.min = String(minW);
      weightRange.max = String(maxW);
      weightInput.min = String(minW);
      weightInput.max = String(maxW);

      state.weight_kg = clamp(state.weight_kg ?? minW, minW, maxW);

      weightRange.value = String(state.weight_kg);
      weightInput.value = String(state.weight_kg);
    }

    // ---------- State setters ----------
    function setProduct(productId, silent=false) {
      state.product_id = productId;

      const list = variantsByProduct.get(productId) || [];
      const preferred = list.find(v => v.variant_id === state.variant_id);
      const chosen = preferred || list[0] || null;
      state.variant_id = chosen ? chosen.variant_id : null;

      const v = getSelectedVariant();
      if (v) {
        state.weight_kg = clampWeightToVariantRange(state.weight_kg ?? Math.round(v.weight_min_kg), v);

        if (v.dose_basis === "mgkg_per_day") {
          const avail = getAvailableMgkg(v, state.weight_kg);
          const first = avail[0] ?? v.mgkg_options[0] ?? null;
          state.mgkg_per_day = (avail.includes(state.mgkg_per_day) ? state.mgkg_per_day : first);
        } else {
          state.mgkg_per_day = null;
        }
      }

      if (!silent) renderAll();
      else renderAll();
    }

    function setVariant(variantId) {
      state.variant_id = variantId;
      const v = getSelectedVariant();
      if (!v) return;

      state.weight_kg = clampWeightToVariantRange(state.weight_kg ?? Math.round(v.weight_min_kg), v);

      if (v.dose_basis === "mgkg_per_day") {
        const avail = getAvailableMgkg(v, state.weight_kg);
        state.mgkg_per_day = (avail.includes(state.mgkg_per_day) ? state.mgkg_per_day : (avail[0] ?? v.mgkg_options[0] ?? null));
      } else {
        state.mgkg_per_day = null;
      }

      renderAll();
    }

    function setMgkg(mgkg) {
      state.mgkg_per_day = mgkg;
      renderAll();
    }

    function setWeight(w, from) {
      const v = getSelectedVariant();
      if (!v) return;

      const before = state.weight_kg;
      const clamped = clampWeightToVariantRange(w, v);
      state.weight_kg = clamped;

      // hint
      weightHint.className = "hint";
      weightHint.textContent = "";
      if (from === "input") {
        const raw = Number(weightInput.value);
        if (!Number.isFinite(raw)) {
          weightHint.textContent = "Введите число (кг)";
          weightHint.classList.add("warn");
        } else if (Math.round(raw) !== raw) {
          weightHint.textContent = `Округлено до ${Math.round(raw)} кг`;
          weightHint.classList.add("warn");
        }
      }
      if (clamped !== w) {
        weightHint.textContent = `Диапазон для формы: ${Math.round(v.weight_min_kg)}–${Math.round(v.weight_max_kg)} кг`;
        weightHint.classList.add("warn");
      }

      // mgkg availability
      if (v.dose_basis === "mgkg_per_day") {
        const avail = getAvailableMgkg(v, clamped);
        if (!avail.includes(state.mgkg_per_day)) state.mgkg_per_day = avail[0] ?? null;
      }

      if (before !== clamped) renderAll();
      else renderAll();
    }

    // ---------- Wheel + result ----------
    function renderWheel(v) {
      const p = productsById.get(state.product_id);

      badgeProduct.textContent = p?.brand_ru ?? "—";
      badgeVariant.textContent = v.strength_label_ru ?? "—";

      // rotate decorative disc
      const angle = weightToAngleDeg(state.weight_kg, DISPLAY_MIN, DISPLAY_MAX);
      rotor.style.transform = `rotate(${-angle}deg)`;

      // windows
      windowsEl.innerHTML = "";

      if (v.dose_basis === "mgkg_per_day") {
        for (const opt of v.mgkg_options) {
          const row = findDoseRow(v.variant_id, state.weight_kg, opt);
          const disabled = !row;
          const el = document.createElement("div");
          el.className = "window" + (opt === state.mgkg_per_day ? " active" : "") + (disabled ? " disabled" : "");
          el.innerHTML = `
            <div class="w-top">
              <div class="w-title">${formatMgkg(opt)} мг/кг/сут</div>
              <div class="w-title">${row ? `${row.freq_per_day}×/сут` : ""}</div>
            </div>
            <div class="w-dose">${row ? formatMl(row.dose_ml) : "—"} <span style="font-size:14px; font-weight:900;">мл</span></div>
            <div class="w-sub">${disabled ? "Нет по карте" : "Нажми, чтобы выбрать"}</div>
          `;
          if (!disabled) el.addEventListener("click", () => setMgkg(opt));
          windowsEl.appendChild(el);
        }
      } else {
        const row = findDoseRow(v.variant_id, state.weight_kg, null);
        const disabled = !row;
        const el = document.createElement("div");
        el.className = "window active" + (disabled ? " disabled" : "");
        el.style.minWidth = "220px";
        el.innerHTML = `
          <div class="w-top">
            <div class="w-title">Доза</div>
            <div class="w-title">${(row ? `${row.freq_per_day}×/сут` : "")}</div>
          </div>
          <div class="w-dose">${row ? formatMl(row.dose_ml) : "—"} <span style="font-size:14px; font-weight:900;">мл</span></div>
          <div class="w-sub">${v.therapy_days ? `${v.therapy_days} дня` : ""}</div>
        `;
        windowsEl.appendChild(el);
      }
    }

    function renderResult(v) {
      const p = productsById.get(state.product_id);
      const title = `${p?.brand_ru ?? ""} · ${v.strength_label_ru ?? ""}`.trim();
      document.getElementById("resultTitle").textContent = title || "Назначение";

      let row = null;
      if (v.dose_basis === "mgkg_per_day") {
        row = (state.mgkg_per_day != null) ? findDoseRow(v.variant_id, state.weight_kg, state.mgkg_per_day) : null;
      } else {
        row = findDoseRow(v.variant_id, state.weight_kg, null);
      }

      if (!row) {
        doseMlEl.textContent = "—";
        freqEl.textContent = "—";
        dailyEl.textContent = "—";
        noteEl.innerHTML = `<strong>Нет дозы по карте</strong> для выбранного веса/режима.`;
        copyBtn.disabled = true;
      } else {
        doseMlEl.textContent = `${formatMl(row.dose_ml)} мл`;
        freqEl.textContent = `${row.freq_per_day} раз/сут`;
        dailyEl.textContent = `${formatMl(row.dose_ml * row.freq_per_day)} мл/сут`;
        noteEl.textContent = `Вес: ${state.weight_kg} кг. Доза берётся из доз-карты (реестр).`;
        copyBtn.disabled = false;
      }

      // Course / regimen
      if (v.therapy_days) {
        courseLine.style.display = "flex";
        courseEl.textContent = `${v.therapy_days} дня`;
      } else {
        courseLine.style.display = "none";
      }

      if (v.dose_basis === "mgkg_per_day") {
        regimenLine.style.display = "flex";
        regimenEl.textContent = `${formatMgkg(state.mgkg_per_day)} мг/кг/сут`;
      } else {
        regimenLine.style.display = "none";
      }

      drawerSub.textContent = `${p?.brand_ru ?? ""} · ${v.strength_label_ru ?? ""} · Вес: ${state.weight_kg} кг`;
    }

    // ---------- Drawer ----------
    function renderDrawer() {
      const v = getSelectedVariant();
      if (!v) return;

      const p = productsById.get(state.product_id);
      drawerSub.textContent = `${p?.brand_ru ?? ""} · ${v.strength_label_ru ?? ""} · Вес: ${state.weight_kg} кг`;

      const idx = doseIndexByVariant.get(v.variant_id);
      const all = (idx?.allRows || []).slice();

      let rows = all;
      if (v.dose_basis === "mgkg_per_day" && state.mgkg_per_day != null) {
        rows = rows.filter(r => r.mgkg_per_day === state.mgkg_per_day);
      }

      const w = state.weight_kg;
      const nearMin = w - 5;
      const nearMax = w + 5;

      let shown = rows;
      if (!state.showAllTable) {
        shown = rows.filter(r => {
          const isRange = r.weight_min_kg !== r.weight_max_kg;
          if (isRange) {
            return rangesIntersect(r.weight_min_kg, r.weight_max_kg, nearMin, nearMax) || (w >= r.weight_min_kg && w <= r.weight_max_kg);
          }
          return r.weight_min_kg >= nearMin && r.weight_min_kg <= nearMax;
        });
      }

      shown.sort((a,b) => (a.weight_min_kg - b.weight_min_kg) || ((a.mgkg_per_day ?? 0) - (b.mgkg_per_day ?? 0)));

      drawerNote.innerHTML = state.showAllTable
        ? `Показана <strong>вся таблица</strong> для выбранной формы${v.dose_basis === "mgkg_per_day" ? ` (режим: ${formatMgkg(state.mgkg_per_day)} мг/кг/сут)` : ""}.`
        : `Показаны строки <strong>рядом с весом</strong> (±5 кг)${v.dose_basis === "mgkg_per_day" ? ` · режим: ${formatMgkg(state.mgkg_per_day)} мг/кг/сут` : ""}.`;

      drawerTbody.innerHTML = "";
      for (const r of shown) {
        const tr = document.createElement("tr");
        const inRange = (w >= r.weight_min_kg && w <= r.weight_max_kg);
        if (inRange) tr.classList.add("hl");

        tr.innerHTML = `
          <td>${formatWeightCell(r)}</td>
          <td>${v.dose_basis === "mgkg_per_day" ? `${formatMgkg(r.mgkg_per_day)} мг/кг/сут` : "—"}</td>
          <td><strong>${formatMl(r.dose_ml)}</strong> мл</td>
          <td>${r.freq_per_day}</td>
          <td style="color: var(--muted)">${escapeHtml(r.label_raw || "")}</td>
        `;
        drawerTbody.appendChild(tr);
      }

      if (shown.length === 0) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td colspan="5" style="color: var(--muted); padding: 14px 8px;">Нет строк для отображения.</td>`;
        drawerTbody.appendChild(tr);
      }
    }

    function openDrawer(open) {
      if (open) {
        drawer.classList.add("open");
        drawerBackdrop.classList.add("open");
        drawer.setAttribute("aria-hidden", "false");
        drawerBackdrop.setAttribute("aria-hidden", "false");
        renderDrawer();
      } else {
        drawer.classList.remove("open");
        drawerBackdrop.classList.remove("open");
        drawer.setAttribute("aria-hidden", "true");
        drawerBackdrop.setAttribute("aria-hidden", "true");
      }
    }

    // ---------- Modal ----------
    function openModal(open) {
      if (open) modalBackdrop.classList.add("open");
      else modalBackdrop.classList.remove("open");
    }

    // ---------- Copy ----------
    function buildCopyText() {
      const v = getSelectedVariant();
      const p = productsById.get(state.product_id);
      if (!v || !p) return "";

      let row = null;
      if (v.dose_basis === "mgkg_per_day") {
        row = (state.mgkg_per_day != null) ? findDoseRow(v.variant_id, state.weight_kg, state.mgkg_per_day) : null;
      } else {
        row = findDoseRow(v.variant_id, state.weight_kg, null);
      }
      if (!row) return "";

      const lines = [];
      lines.push(`Препарат: ${p.brand_ru} (${v.strength_label_ru || v.title_ru})`);
      lines.push(`Вес: ${state.weight_kg} кг`);
      if (v.dose_basis === "mgkg_per_day" && state.mgkg_per_day != null) lines.push(`Режим: ${formatMgkg(state.mgkg_per_day)} мг/кг/сут`);
      lines.push(`Доза: ${formatMl(row.dose_ml)} мл × ${row.freq_per_day} раз/сут`);
      lines.push(`Суточно: ${formatMl(row.dose_ml * row.freq_per_day)} мл/сут`);
      if (v.therapy_days) lines.push(`Курс: ${v.therapy_days} дня`);
      return lines.join("\n");
    }

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add("show");
      window.setTimeout(() => toast.classList.remove("show"), 1400);
    }

    // ---------- Lookup ----------
    function buildDoseIndex(rows) {
      const byKey = new Map(); // key = mgkg or "NA" -> { point: Map, ranges: [] }
      for (const r of rows) {
        const key = (r.mgkg_per_day == null) ? "NA" : String(r.mgkg_per_day);
        if (!byKey.has(key)) byKey.set(key, { point: new Map(), ranges: [] });
        const bucket = byKey.get(key);

        const wMin = Number(r.weight_min_kg);
        const wMax = Number(r.weight_max_kg);
        if (wMin === wMax) bucket.point.set(wMin, r);
        else bucket.ranges.push(r);
      }
      for (const bucket of byKey.values()) bucket.ranges.sort((a,b) => ((a.weight_max_kg - a.weight_min_kg) - (b.weight_max_kg - b.weight_min_kg)));
      return { byKey, allRows: rows };
    }

    function findDoseRow(variantId, weightKg, mgkg) {
      const idx = doseIndexByVariant.get(variantId);
      if (!idx) return null;

      const key = (mgkg == null) ? "NA" : String(mgkg);
      const bucket = idx.byKey.get(key);
      if (!bucket) return null;

      const direct = bucket.point.get(weightKg);
      if (direct) return direct;

      for (const r of bucket.ranges) {
        if (weightKg >= r.weight_min_kg && weightKg <= r.weight_max_kg) return r;
      }
      return null;
    }

    function getAvailableMgkg(variant, weightKg) {
      const opts = variant.mgkg_options || [];
      const avail = [];
      for (const opt of opts) {
        if (findDoseRow(variant.variant_id, weightKg, opt)) avail.push(opt);
      }
      return avail;
    }

    // ---------- Formatting ----------
    function formatMl(x) {
      const n = Number(x);
      if (!Number.isFinite(n)) return "—";
      return n.toLocaleString("ru-RU", { minimumFractionDigits: 0, maximumFractionDigits: 2 });
    }
    function formatMgkg(x) {
      if (x == null) return "—";
      const n = Number(x);
      if (!Number.isFinite(n)) return "—";
      return n.toLocaleString("ru-RU", { minimumFractionDigits: 0, maximumFractionDigits: 0 });
    }
    function formatWeightCell(r) {
      const a = Number(r.weight_min_kg);
      const b = Number(r.weight_max_kg);
      return (a === b) ? String(a) : `${a}–${b}`;
    }
    function shortTitle(t) {
      const s = String(t || "").trim();
      return s.replace(/^Расчет\s+разовой\s+дозы\s+препарата\s+/i, "").slice(0, 72);
    }
    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, (m) => ({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m]));
    }

    // ---------- Wheel drawing ----------
    function drawWheelBase() {
      const svgNS = "http://www.w3.org/2000/svg";
      rotor.innerHTML = "";

      // 3 decorative sectors
      const sectors = [
        { color: "rgba(0,166,81,0.14)" },
        { color: "rgba(0,179,184,0.14)" },
        { color: "rgba(11,42,74,0.10)" }
      ];
      const center = { x: 250, y: 250 };
      const outerR = 206;
      const innerR = 118;
      const sectorCount = 3;
      const sectorSweep = 360 / sectorCount;

      for (let i = 0; i < sectorCount; i++) {
        const start = -90 + i * sectorSweep;
        const end = start + sectorSweep;
        const path = document.createElementNS(svgNS, "path");
        path.setAttribute("d", ringSectorPath(center.x, center.y, innerR, outerR, start, end));
        path.setAttribute("fill", sectors[i].color);
        path.setAttribute("stroke", "rgba(11,42,74,0.06)");
        path.setAttribute("stroke-width", "1");
        rotor.appendChild(path);
      }

      // ticks + labels
      const count = DISPLAY_MAX - DISPLAY_MIN + 1;
      for (let w = DISPLAY_MIN; w <= DISPLAY_MAX; w++) {
        const idx = w - DISPLAY_MIN;
        const angleDeg = (idx / count) * 360;
        const a = degToRad(-90 + angleDeg);

        const r1 = 214;
        const r2 = 226;
        const x1 = center.x + Math.cos(a) * r1;
        const y1 = center.y + Math.sin(a) * r1;
        const x2 = center.x + Math.cos(a) * r2;
        const y2 = center.y + Math.sin(a) * r2;

        const major = (w % 5 === 0) || (w === DISPLAY_MIN) || (w === DISPLAY_MAX);

        const tick = document.createElementNS(svgNS, "line");
        tick.setAttribute("x1", x1);
        tick.setAttribute("y1", y1);
        tick.setAttribute("x2", x2);
        tick.setAttribute("y2", y2);
        tick.setAttribute("stroke", major ? "rgba(11,42,74,0.55)" : "rgba(11,42,74,0.22)");
        tick.setAttribute("stroke-width", major ? "2" : "1");
        rotor.appendChild(tick);

        if (major) {
          const labelR = 242;
          const xl = center.x + Math.cos(a) * labelR;
          const yl = center.y + Math.sin(a) * labelR;

          const t = document.createElementNS(svgNS, "text");
          t.textContent = String(w);
          t.setAttribute("x", xl);
          t.setAttribute("y", yl);
          t.setAttribute("fill", "rgba(11,42,74,0.80)");
          t.setAttribute("font-size", "11");
          t.setAttribute("font-family", "Arial, sans-serif");
          t.setAttribute("font-weight", "900");
          t.setAttribute("text-anchor", "middle");
          t.setAttribute("dominant-baseline", "middle");
          rotor.appendChild(t);
        }
      }

      const ring = document.createElementNS(svgNS, "circle");
      ring.setAttribute("cx", "250");
      ring.setAttribute("cy", "250");
      ring.setAttribute("r", String(innerR));
      ring.setAttribute("fill", "none");
      ring.setAttribute("stroke", "rgba(11,42,74,0.12)");
      ring.setAttribute("stroke-width", "2");
      rotor.appendChild(ring);
    }

    function ringSectorPath(cx, cy, rInner, rOuter, startDeg, endDeg) {
      const startOuter = polarToCartesian(cx, cy, rOuter, endDeg);
      const endOuter = polarToCartesian(cx, cy, rOuter, startDeg);
      const startInner = polarToCartesian(cx, cy, rInner, startDeg);
      const endInner = polarToCartesian(cx, cy, rInner, endDeg);

      const largeArc = (endDeg - startDeg) <= 180 ? "0" : "1";

      return [
        "M", startOuter.x, startOuter.y,
        "A", rOuter, rOuter, 0, largeArc, 0, endOuter.x, endOuter.y,
        "L", startInner.x, startInner.y,
        "A", rInner, rInner, 0, largeArc, 1, endInner.x, endInner.y,
        "Z"
      ].join(" ");
    }

    function polarToCartesian(cx, cy, r, deg) {
      const rad = degToRad(deg);
      return { x: cx + (r * Math.cos(rad)), y: cy + (r * Math.sin(rad)) };
    }

    function degToRad(d) { return d * Math.PI / 180; }

    function weightToAngleDeg(weight, displayMin, displayMax) {
      const count = (displayMax - displayMin + 1);
      const idx = clamp(weight, displayMin, displayMax) - displayMin;
      return (idx / count) * 360;
    }

    // ---------- Persistence ----------
    function persistState() {
      try {
        const payload = {
          product_id: state.product_id,
          variant_id: state.variant_id,
          weight_kg: state.weight_kg,
          mgkg_per_day: state.mgkg_per_day
        };
        localStorage.setItem("dosing_wheel_kz_state_v1", JSON.stringify(payload));
      } catch (_) {}
    }

    function loadState() {
      // defaults
      const list0 = variantsByProduct.get(state.product_id) || [];
      state.variant_id = list0[0]?.variant_id ?? null;

      const v0 = getSelectedVariant();
      state.weight_kg = v0 ? Math.round(v0.weight_min_kg) : 10;
      state.mgkg_per_day = (v0 && v0.dose_basis === "mgkg_per_day") ? (v0.mgkg_options || [])[0] ?? null : null;

      try {
        const raw = localStorage.getItem("dosing_wheel_kz_state_v1");
        if (!raw) return;
        const saved = JSON.parse(raw);

        if (saved.product_id && productsById.has(saved.product_id)) state.product_id = saved.product_id;

        const list = variantsByProduct.get(state.product_id) || [];
        const v = list.find(x => x.variant_id === saved.variant_id) || list[0] || null;
        state.variant_id = v?.variant_id ?? null;

        const vSel = getSelectedVariant();
        if (vSel) {
          const w = Number(saved.weight_kg);
          if (Number.isFinite(w)) state.weight_kg = clampWeightToVariantRange(Math.round(w), vSel);

          if (vSel.dose_basis === "mgkg_per_day") {
            const mg = Number(saved.mgkg_per_day);
            if (Number.isFinite(mg)) state.mgkg_per_day = mg;
            const avail = getAvailableMgkg(vSel, state.weight_kg);
            if (!avail.includes(state.mgkg_per_day)) state.mgkg_per_day = avail[0] ?? (vSel.mgkg_options || [])[0] ?? null;
          } else {
            state.mgkg_per_day = null;
          }
        }
      } catch (_) {}
    }

    function clampWeightToVariantRange(w, variant) {
      const minW = Math.round(variant.weight_min_kg);
      const maxW = Math.round(variant.weight_max_kg);
      return clamp(w, minW, maxW);
    }

    function clampAndNormalizeWeight(raw) {
      const v = getSelectedVariant();
      if (!v) return 10;
      const n = Number(raw);
      if (!Number.isFinite(n)) return clampWeightToVariantRange(Math.round(v.weight_min_kg), v);
      return clampWeightToVariantRange(Math.round(n), v);
    }

    function getSelectedVariant() {
      return variants.find(v => v.variant_id === state.variant_id) || null;
    }

    // ---------- Utilities ----------
    function groupBy(arr, keyFn) {
      const m = new Map();
      for (const x of arr) {
        const k = keyFn(x);
        if (!m.has(k)) m.set(k, []);
        m.get(k).push(x);
      }
      return m;
    }
    function clamp(x, a, b) {
      return Math.max(a, Math.min(b, x));
    }
    function rangesIntersect(a1,a2,b1,b2) {
      return Math.max(a1,b1) <= Math.min(a2,b2);
    }

    // ---------- Kickoff ----------
    renderAll();
  })();
  </script>
</body>
</html>
