<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sandoz | –î–æ–∑–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-blue: #001C4A;
            --sandoz-blue: #1C59B5;
            --medium-blue: #5DA6FF;
            --light-blue: #A8D5FF;
            --sand: #F1ECE9;
            --stone: #D6C6B6;
            --taupe: #A39F8B;
            --orange: #FC522D;
            --teal: #006B76;
            --mustard: #D5862C;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--sandoz-blue) 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            z-index: 1000;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }
        
        header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 0.8s ease-out;
        }
        
        .logo-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .sandoz-logo {
            font-family: 'Sora', sans-serif;
            font-size: 48px;
            font-weight: 700;
            color: white;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        .header-subtitle {
            color: var(--light-blue);
            font-size: 20px;
            font-weight: 300;
            letter-spacing: 0.5px;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 450px 1fr 450px;
            gap: 40px;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–ª–µ—Å–æ */
        .wheel-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .wheel-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .wheel-decorative {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: white;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            animation: rotateWheel 30s linear infinite;
        }
        
        @keyframes rotateWheel {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 25%;
            height: 25%;
            background: linear-gradient(135deg, var(--sandoz-blue), var(--medium-blue));
            border-radius: 50%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Sora', sans-serif;
            font-weight: 700;
            font-size: 14px;
        }
        
        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            clip-path: polygon(0 0, 100% 0, 100% 100%);
        }
        
        .wheel-label {
            margin-top: 30px;
            text-align: center;
            color: var(--sand);
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .control-panel {
            position: relative;
        }
        
        .control-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--orange), var(--mustard));
            border-radius: 4px;
        }
        
        .section-title {
            font-family: 'Sora', sans-serif;
            font-size: 20px;
            font-weight: 600;
            color: var(--dark-blue);
            margin-bottom: 25px;
            padding-left: 20px;
        }
        
        .drug-selector {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 30px;
        }
        
        .drug-btn {
            padding: 18px 20px;
            border: 2px solid var(--stone);
            border-radius: 16px;
            background: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Sora', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: var(--dark-blue);
            text-align: left;
            position: relative;
            overflow: hidden;
        }
        
        .drug-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 0;
            background: linear-gradient(135deg, var(--sandoz-blue), var(--medium-blue));
            transition: height 0.3s ease;
        }
        
        .drug-btn span {
            position: relative;
            z-index: 1;
        }
        
        .drug-btn:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 16px rgba(28, 89, 181, 0.15);
            border-color: var(--medium-blue);
        }
        
        .drug-btn.active {
            border-color: var(--sandoz-blue);
            background: linear-gradient(135deg, rgba(28, 89, 181, 0.1), rgba(93, 166, 255, 0.1));
            color: var(--sandoz-blue);
        }
        
        .drug-btn.active::before {
            height: 100%;
        }
        
        .slider-group {
            margin-bottom: 35px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .slider-label-text {
            font-weight: 600;
            color: var(--dark-blue);
            font-size: 15px;
        }
        
        .slider-value {
            font-family: 'Sora', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--sandoz-blue);
        }
        
        .slider-container {
            position: relative;
            height: 60px;
            display: flex;
            align-items: center;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 10px;
            background: linear-gradient(to right, var(--light-blue) 0%, var(--light-blue) 0%, var(--sand) 0%);
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--sandoz-blue), var(--medium-blue));
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(28, 89, 181, 0.4);
            transition: all 0.3s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 20px rgba(28, 89, 181, 0.6);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--sandoz-blue), var(--medium-blue));
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 12px rgba(28, 89, 181, 0.4);
            transition: all 0.3s ease;
        }
        
        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 20px rgba(28, 89, 181, 0.6);
        }
        
        .weight-marks {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding: 0 5px;
        }
        
        .weight-mark {
            font-size: 11px;
            color: var(--taupe);
            font-weight: 500;
        }
        
        .concentration-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .conc-option {
            padding: 14px 18px;
            border: 2px solid var(--stone);
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            color: var(--dark-blue);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .conc-option:hover {
            border-color: var(--medium-blue);
            background: rgba(168, 213, 255, 0.1);
        }
        
        .conc-option.active {
            border-color: var(--sandoz-blue);
            background: linear-gradient(135deg, rgba(28, 89, 181, 0.1), rgba(93, 166, 255, 0.1));
            font-weight: 600;
        }
        
        .conc-radio {
            width: 18px;
            height: 18px;
            border: 2px solid var(--stone);
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .conc-option.active .conc-radio {
            border-color: var(--sandoz-blue);
            background: var(--sandoz-blue);
        }
        
        .conc-option.active .conc-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
        }
        
        .dosage-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 25px;
        }
        
        .dosage-chip {
            padding: 10px 20px;
            border: 2px solid var(--stone);
            border-radius: 24px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            font-weight: 600;
            color: var(--dark-blue);
        }
        
        .dosage-chip:hover {
            transform: translateY(-2px);
            border-color: var(--medium-blue);
        }
        
        .dosage-chip.active {
            background: linear-gradient(135deg, var(--teal), var(--medium-blue));
            border-color: var(--teal);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 107, 118, 0.3);
        }
        
        .calculate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--orange), var(--mustard));
            color: white;
            border: none;
            border-radius: 16px;
            font-family: 'Sora', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(252, 82, 45, 0.3);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(252, 82, 45, 0.4);
        }
        
        .calculate-btn:active {
            transform: translateY(-1px);
        }
        
        /* –ü–∞–Ω–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .results-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .result-card {
            background: linear-gradient(135deg, var(--sandoz-blue), var(--medium-blue));
            border-radius: 20px;
            padding: 35px;
            color: white;
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        
        .result-card.show {
            display: block;
        }
        
        .result-header {
            font-family: 'Sora', sans-serif;
            font-size: 16px;
            font-weight: 300;
            margin-bottom: 10px;
            opacity: 0.9;
            letter-spacing: 0.5px;
        }
        
        .result-dose {
            font-family: 'Sora', sans-serif;
            font-size: 64px;
            font-weight: 700;
            margin: 15px 0;
            line-height: 1;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .result-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 25px;
        }
        
        .result-info-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 16px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .result-info-label {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-info-value {
            font-size: 14px;
            font-weight: 600;
        }
        
        .warning-card {
            background: linear-gradient(135deg, #FFF3CD, #FFE5A1);
            border-left: 4px solid var(--mustard);
            padding: 18px;
            border-radius: 12px;
            color: #856404;
            display: none;
            font-size: 14px;
        }
        
        .warning-card.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        .warning-icon {
            font-size: 20px;
            margin-right: 10px;
        }
        
        .dosage-table-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }
        
        .table-header {
            background: linear-gradient(135deg, var(--dark-blue), var(--sandoz-blue));
            color: white;
            padding: 20px 25px;
            font-family: 'Sora', sans-serif;
            font-size: 18px;
            font-weight: 600;
        }
        
        .table-wrapper {
            max-height: 400px;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: var(--sand);
            color: var(--dark-blue);
            padding: 12px 18px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
            font-size: 14px;
        }
        
        td {
            padding: 12px 18px;
            border-bottom: 1px solid var(--sand);
            color: var(--dark-blue);
            font-size: 14px;
        }
        
        tr:hover {
            background: rgba(168, 213, 255, 0.1);
        }
        
        tr.highlight {
            background: linear-gradient(135deg, rgba(252, 82, 45, 0.15), rgba(213, 134, 44, 0.15));
            font-weight: 600;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--taupe);
        }
        
        .empty-state-icon {
            font-size: 40px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        .empty-state-text {
            font-size: 14px;
        }
        
        @media (max-width: 1400px) {
            .main-layout {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .wheel-section {
                order: -1;
            }
            
            .wheel-container {
                max-width: 300px;
            }
            
            .result-dose {
                font-size: 48px;
            }
        }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    
    <div class="container">
        <header>
            <div class="logo-area">
                <div class="sandoz-logo">SANDOZ</div>
            </div>
            <div class="header-subtitle">–î–æ–∑–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–æ–≤</div>
        </header>
        
        <div class="main-layout">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="card control-panel">
                <h2 class="section-title">–í—ã–±–æ—Ä –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞</h2>
                <div class="drug-selector" id="drugSelector"></div>
                
                <div id="concentrationBlock" style="display: none;">
                    <h3 class="section-title">–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è</h3>
                    <div class="concentration-selector" id="concentrationSelector"></div>
                </div>
                
                <div id="weightBlock" style="display: none;">
                    <h3 class="section-title">–í–µ—Å –ø–∞—Ü–∏–µ–Ω—Ç–∞</h3>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span class="slider-label-text">–ú–∞—Å—Å–∞ —Ç–µ–ª–∞</span>
                            <span class="slider-value" id="weightValue">5 –∫–≥</span>
                        </div>
                        <div class="slider-container">
                            <input type="range" id="weightSlider" min="2" max="45" value="5" step="0.5">
                        </div>
                        <div class="weight-marks">
                            <span class="weight-mark">2</span>
                            <span class="weight-mark">10</span>
                            <span class="weight-mark">20</span>
                            <span class="weight-mark">30</span>
                            <span class="weight-mark">45 –∫–≥</span>
                        </div>
                    </div>
                </div>
                
                <div id="dosageBlock" style="display: none;">
                    <h3 class="section-title">–†–µ–∂–∏–º –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                    <div class="dosage-selector" id="dosageSelector"></div>
                </div>
                
                <button class="calculate-btn" id="calculateBtn" style="display: none;">
                    –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ–∑—É
                </button>
            </div>
            
            <!-- –¶–µ–Ω—Ç—Ä: –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–ª–µ—Å–æ -->
            <div class="wheel-section">
                <div class="wheel-container">
                    <div class="wheel-decorative">
                        <!-- –°–µ–≥–º–µ–Ω—Ç—ã –∫–æ–ª–µ—Å–∞ -->
                        <div class="wheel-segment" style="background: linear-gradient(135deg, var(--sandoz-blue), var(--medium-blue)); transform: rotate(0deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, var(--teal), var(--medium-blue)); transform: rotate(45deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, #A2D5AC, var(--teal)); transform: rotate(90deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, #FFE66D, #A2D5AC); transform: rotate(135deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, var(--mustard), #FFE66D); transform: rotate(180deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, var(--orange), var(--mustard)); transform: rotate(225deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, #A39F8B, var(--orange)); transform: rotate(270deg);"></div>
                        <div class="wheel-segment" style="background: linear-gradient(135deg, var(--sandoz-blue), #A39F8B); transform: rotate(315deg);"></div>
                        
                        <div class="wheel-center">
                            <span>SANDOZ</span>
                        </div>
                    </div>
                </div>
                <div class="wheel-label">
                    –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–∞—è –¥–æ–∑–∏—Ä–æ–≤–æ—á–Ω–∞—è –∫–∞—Ä—Ç–∞
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="results-panel">
                <div class="result-card" id="resultCard">
                    <div class="result-header">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–æ–∑–∞</div>
                    <div class="result-dose" id="resultDose">-</div>
                    <div class="result-info">
                        <div class="result-info-item">
                            <div class="result-info-label">–ü—Ä–µ–ø–∞—Ä–∞—Ç</div>
                            <div class="result-info-value" id="resDrug">-</div>
                        </div>
                        <div class="result-info-item">
                            <div class="result-info-label">–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è</div>
                            <div class="result-info-value" id="resConc">-</div>
                        </div>
                        <div class="result-info-item">
                            <div class="result-info-label">–í–µ—Å –ø–∞—Ü–∏–µ–Ω—Ç–∞</div>
                            <div class="result-info-value" id="resWeight">-</div>
                        </div>
                        <div class="result-info-item">
                            <div class="result-info-label">–†–µ–∂–∏–º</div>
                            <div class="result-info-value" id="resRegime">-</div>
                        </div>
                    </div>
                </div>
                
                <div class="warning-card" id="warningCard">
                    <div style="display: flex; align-items: flex-start;">
                        <span class="warning-icon">‚ö†Ô∏è</span>
                        <div>
                            <strong style="display: block; margin-bottom: 5px;">–í–Ω–∏–º–∞–Ω–∏–µ</strong>
                            <span id="warningText"></span>
                        </div>
                    </div>
                </div>
                
                <div class="dosage-table-card">
                    <div class="table-header">–°–ø—Ä–∞–≤–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</div>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>–í–µ—Å (–∫–≥)</th>
                                    <th>–î–æ–∑–∞</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <tr>
                                    <td colspan="2">
                                        <div class="empty-state">
                                            <div class="empty-state-icon">üìä</div>
                                            <div class="empty-state-text">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é</div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const dosageData = {
  "title": "–î–æ–∑–∏—Ä–æ–≤–æ—á–Ω—ã–µ –∫–∞—Ä—Ç—ã –∞–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–æ–≤ –¥–ª—è –¥–µ—Ç–µ–π (–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω)",
  "drugs": [
    {
      "id": "amoksiklav",
      "name": "–ê–º–æ–∫—Å–∏–∫–ª–∞–≤¬Æ",
      "preparations": [
        {
          "concentration": "156.25 –º–≥/5 –º–ª",
          "dosages": [
            {
              "name": "20 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 2,
                  "dose": "0,5 –º–ª"
                },
                {
                  "weight": 3,
                  "dose": "0,8 –º–ª"
                },
                {
                  "weight": 4,
                  "dose": "1,1 –º–ª"
                },
                {
                  "weight": 5,
                  "dose": "1,3 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "1,6 –º–ª"
                },
                {
                  "weight": 7,
                  "dose": "1,9 –º–ª"
                },
                {
                  "weight": 8,
                  "dose": "2,1 –º–ª"
                },
                {
                  "weight": 9,
                  "dose": "2,4 –º–ª"
                },
                {
                  "weight": 10,
                  "dose": "2,7 –º–ª"
                },
                {
                  "weight": 11,
                  "dose": "2,9 –º–ª"
                },
                {
                  "weight": 12,
                  "dose": "3,2 –º–ª"
                },
                {
                  "weight": 13,
                  "dose": "3,5 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "3,7 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "4,0 –º–ª"
                },
                {
                  "weight": 16,
                  "dose": "4,3 –º–ª"
                },
                {
                  "weight": 17,
                  "dose": "4,5 –º–ª"
                },
                {
                  "weight": 18,
                  "dose": "4,8 –º–ª"
                },
                {
                  "weight": 19,
                  "dose": "5,1 –º–ª"
                },
                {
                  "weight": 20,
                  "dose": "5,3 –º–ª"
                }
              ]
            },
            {
              "name": "40 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 2,
                  "dose": "1,0 –º–ª"
                },
                {
                  "weight": 3,
                  "dose": "1,6 –º–ª"
                },
                {
                  "weight": 4,
                  "dose": "2,1 –º–ª"
                },
                {
                  "weight": 5,
                  "dose": "2,7 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "3,2 –º–ª"
                },
                {
                  "weight": 7,
                  "dose": "3,7 –º–ª"
                },
                {
                  "weight": 8,
                  "dose": "4,3 –º–ª"
                },
                {
                  "weight": 9,
                  "dose": "4,8 –º–ª"
                },
                {
                  "weight": 10,
                  "dose": "5,3 –º–ª"
                },
                {
                  "weight": 11,
                  "dose": "5,9 –º–ª"
                },
                {
                  "weight": 12,
                  "dose": "6,4 –º–ª"
                },
                {
                  "weight": 13,
                  "dose": "6,9 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "7,5 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "8,0 –º–ª"
                },
                {
                  "weight": 16,
                  "dose": "8,5 –º–ª"
                },
                {
                  "weight": 17,
                  "dose": "9,1 –º–ª"
                },
                {
                  "weight": 18,
                  "dose": "9,6 –º–ª"
                },
                {
                  "weight": 19,
                  "dose": "10,1 –º–ª"
                },
                {
                  "weight": 20,
                  "dose": "10,7 –º–ª"
                }
              ]
            },
            {
              "name": "60 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 2,
                  "dose": "1,6 –º–ª"
                },
                {
                  "weight": 3,
                  "dose": "2,4 –º–ª"
                },
                {
                  "weight": 4,
                  "dose": "3,2 –º–ª"
                },
                {
                  "weight": 5,
                  "dose": "4 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "4,8 –º–ª"
                }
              ]
            }
          ]
        },
        {
          "concentration": "312.5 –º–≥/5 –º–ª",
          "dosages": [
            {
              "name": "20 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 3,
                  "dose": "0.4"
                },
                {
                  "weight": 4,
                  "dose": "0.5"
                },
                {
                  "weight": 5,
                  "dose": "0.7"
                },
                {
                  "weight": 6,
                  "dose": "0.8"
                },
                {
                  "weight": 7,
                  "dose": "0.9"
                },
                {
                  "weight": 8,
                  "dose": "1.1"
                },
                {
                  "weight": 9,
                  "dose": "1.2"
                },
                {
                  "weight": 10,
                  "dose": "1.3"
                },
                {
                  "weight": 11,
                  "dose": "1.5"
                },
                {
                  "weight": 12,
                  "dose": "1.6"
                },
                {
                  "weight": 13,
                  "dose": "1.7"
                },
                {
                  "weight": 14,
                  "dose": "1.9"
                },
                {
                  "weight": 15,
                  "dose": "2"
                },
                {
                  "weight": 16,
                  "dose": "2.1"
                },
                {
                  "weight": 17,
                  "dose": "2.3"
                },
                {
                  "weight": 18,
                  "dose": "2.4"
                },
                {
                  "weight": 19,
                  "dose": "2.5"
                },
                {
                  "weight": 20,
                  "dose": "2.7"
                },
                {
                  "weight": 21,
                  "dose": "2.8"
                },
                {
                  "weight": 22,
                  "dose": "2.9"
                },
                {
                  "weight": 23,
                  "dose": "3.1"
                },
                {
                  "weight": 24,
                  "dose": "3.2"
                },
                {
                  "weight": 25,
                  "dose": "3.3"
                },
                {
                  "weight": 26,
                  "dose": "3.5"
                },
                {
                  "weight": 27,
                  "dose": "3.6"
                },
                {
                  "weight": 28,
                  "dose": "3.7"
                },
                {
                  "weight": 29,
                  "dose": "3.9"
                },
                {
                  "weight": 30,
                  "dose": "4"
                },
                {
                  "weight": 31,
                  "dose": "4.1"
                },
                {
                  "weight": 32,
                  "dose": "4.3"
                },
                {
                  "weight": 33,
                  "dose": "4.4"
                },
                {
                  "weight": 34,
                  "dose": "4.5"
                },
                {
                  "weight": 35,
                  "dose": "4.7"
                },
                {
                  "weight": 36,
                  "dose": "4.8"
                },
                {
                  "weight": 37,
                  "dose": "4.9"
                },
                {
                  "weight": 38,
                  "dose": "5.1"
                },
                {
                  "weight": 39,
                  "dose": "5.2"
                }
              ]
            },
            {
              "name": "40 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 3,
                  "dose": "0.8"
                },
                {
                  "weight": 4,
                  "dose": "1.1"
                },
                {
                  "weight": 5,
                  "dose": "1.3"
                },
                {
                  "weight": 6,
                  "dose": "1.6"
                },
                {
                  "weight": 7,
                  "dose": "1.9"
                },
                {
                  "weight": 8,
                  "dose": "2.1"
                },
                {
                  "weight": 9,
                  "dose": "2.4"
                },
                {
                  "weight": 10,
                  "dose": "2.7"
                },
                {
                  "weight": 11,
                  "dose": "2.9"
                },
                {
                  "weight": 12,
                  "dose": "3.2"
                },
                {
                  "weight": 13,
                  "dose": "3.5"
                },
                {
                  "weight": 14,
                  "dose": "3.7"
                },
                {
                  "weight": 15,
                  "dose": "4"
                },
                {
                  "weight": 16,
                  "dose": "4.3"
                },
                {
                  "weight": 17,
                  "dose": "4.5"
                },
                {
                  "weight": 18,
                  "dose": "4.8"
                },
                {
                  "weight": 19,
                  "dose": "5.1"
                },
                {
                  "weight": 20,
                  "dose": "5.3"
                },
                {
                  "weight": 21,
                  "dose": "5.6"
                },
                {
                  "weight": 22,
                  "dose": "5.9"
                },
                {
                  "weight": 23,
                  "dose": "6.1"
                },
                {
                  "weight": 24,
                  "dose": "6.4"
                },
                {
                  "weight": 25,
                  "dose": "6.7"
                },
                {
                  "weight": 26,
                  "dose": "6.9"
                },
                {
                  "weight": 27,
                  "dose": "7.2"
                },
                {
                  "weight": 28,
                  "dose": "7.5"
                },
                {
                  "weight": 29,
                  "dose": "7.7"
                },
                {
                  "weight": 30,
                  "dose": "8"
                },
                {
                  "weight": 31,
                  "dose": "8.3"
                },
                {
                  "weight": 32,
                  "dose": "8.5"
                },
                {
                  "weight": 33,
                  "dose": "8.8"
                },
                {
                  "weight": 34,
                  "dose": "9.1"
                },
                {
                  "weight": 35,
                  "dose": "9.3"
                },
                {
                  "weight": 36,
                  "dose": "9.6"
                },
                {
                  "weight": 37,
                  "dose": "9.9"
                },
                {
                  "weight": 38,
                  "dose": "10.1"
                },
                {
                  "weight": 39,
                  "dose": "10.4"
                }
              ]
            },
            {
              "name": "60 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 3,
                  "dose": "1.2"
                },
                {
                  "weight": 4,
                  "dose": "1.6"
                },
                {
                  "weight": 5,
                  "dose": "2"
                },
                {
                  "weight": 6,
                  "dose": "2.4"
                },
                {
                  "weight": 7,
                  "dose": "2.8"
                },
                {
                  "weight": 8,
                  "dose": "3.2"
                },
                {
                  "weight": 9,
                  "dose": "3.6"
                },
                {
                  "weight": 10,
                  "dose": "4"
                },
                {
                  "weight": 11,
                  "dose": "4.4"
                },
                {
                  "weight": 12,
                  "dose": "4.8"
                },
                {
                  "weight": 13,
                  "dose": "5.2"
                }
              ]
            }
          ]
        },
        {
          "concentration": "457 –º–≥/5 –º–ª",
          "note": "2 —Ä–∞–∑–∞ –≤ —Å—É—Ç–∫–∏",
          "dosages": [
            {
              "name": "25 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 5,
                  "dose": "0,8 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "0,9 –º–ª"
                },
                {
                  "weight": 7,
                  "dose": "1,1 –º–ª"
                },
                {
                  "weight": 8,
                  "dose": "1,3 –º–ª"
                },
                {
                  "weight": 9,
                  "dose": "1,4 –º–ª"
                },
                {
                  "weight": 10,
                  "dose": "1,6 –º–ª"
                },
                {
                  "weight": 11,
                  "dose": "1,7 –º–ª"
                },
                {
                  "weight": 12,
                  "dose": "1,9 –º–ª"
                },
                {
                  "weight": 13,
                  "dose": "2,0 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "2,2 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "2,3 –º–ª"
                },
                {
                  "weight": 20,
                  "dose": "3,1 –º–ª"
                },
                {
                  "weight": 25,
                  "dose": "4,0 –º–ª"
                },
                {
                  "weight": 30,
                  "dose": "4,7 –º–ª"
                },
                {
                  "weight": 35,
                  "dose": "5,5 –º–ª"
                },
                {
                  "weight": 40,
                  "dose": "6,3 –º–ª"
                }
              ]
            },
            {
              "name": "45 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 5,
                  "dose": "1,4 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "1,7 –º–ª"
                },
                {
                  "weight": 7,
                  "dose": "2,0 –º–ª"
                },
                {
                  "weight": 8,
                  "dose": "2,3 –º–ª"
                },
                {
                  "weight": 9,
                  "dose": "2,5 –º–ª"
                },
                {
                  "weight": 10,
                  "dose": "2,8 –º–ª"
                },
                {
                  "weight": 11,
                  "dose": "3,1 –º–ª"
                },
                {
                  "weight": 12,
                  "dose": "3,4 –º–ª"
                },
                {
                  "weight": 13,
                  "dose": "3,7 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "3,9 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "4,2 –º–ª"
                },
                {
                  "weight": 20,
                  "dose": "5,6 –º–ª"
                },
                {
                  "weight": 25,
                  "dose": "7,0 –º–ª"
                },
                {
                  "weight": 30,
                  "dose": "8,5 –º–ª"
                },
                {
                  "weight": 35,
                  "dose": "9,8 –º–ª"
                },
                {
                  "weight": 40,
                  "dose": "11,3 –º–ª"
                }
              ]
            },
            {
              "name": "70 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
              "data": [
                {
                  "weight": 13,
                  "dose": "5,7 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "6,0 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "6,5 –º–ª"
                },
                {
                  "weight": 20,
                  "dose": "8,8 –º–ª"
                },
                {
                  "weight": 25,
                  "dose": "11 –º–ª"
                },
                {
                  "weight": 30,
                  "dose": "13 –º–ª"
                },
                {
                  "weight": 35,
                  "dose": "15,3 –º–ª"
                },
                {
                  "weight": 40,
                  "dose": "17,5 –º–ª"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "ospamox",
      "name": "–û—Å–ø–∞–º–æ–∫—Å",
      "preparations": [
        {
          "concentration": "125 –º–≥/5 –º–ª",
          "note": "2 —Ä–∞–∑–∞ –≤ —Å—É—Ç–∫–∏",
          "dosages": [
            {
              "name": "40 –º–≥/–∫–≥/—Å—É—Ç",
              "data": [
                {
                  "weight": 2,
                  "dose": "1,6 –º–ª"
                },
                {
                  "weight": 3,
                  "dose": "2,4 –º–ª"
                },
                {
                  "weight": 4,
                  "dose": "3,2 –º–ª"
                },
                {
                  "weight": 5,
                  "dose": "4 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "4,8 –º–ª"
                },
                {
                  "weight": 7,
                  "dose": "5,6 –º–ª"
                },
                {
                  "weight": 8,
                  "dose": "6,4 –º–ª"
                },
                {
                  "weight": 9,
                  "dose": "7,2 –º–ª"
                },
                {
                  "weight": 10,
                  "dose": "8 –º–ª"
                }
              ]
            },
            {
              "name": "50 –º–≥/–∫–≥/—Å—É—Ç",
              "data": [
                {
                  "weight": 2,
                  "dose": "2 –º–ª"
                },
                {
                  "weight": 3,
                  "dose": "3 –º–ª"
                },
                {
                  "weight": 4,
                  "dose": "4 –º–ª"
                },
                {
                  "weight": 5,
                  "dose": "5 –º–ª"
                },
                {
                  "weight": 6,
                  "dose": "6 –º–ª"
                },
                {
                  "weight": 7,
                  "dose": "7 –º–ª"
                }
              ]
            },
            {
              "name": "90 –º–≥/–∫–≥/—Å—É—Ç",
              "data": [
                {
                  "weight": 2,
                  "dose": "3,6 –º–ª"
                },
                {
                  "weight": 3,
                  "dose": "5,4 –º–ª"
                },
                {
                  "weight": 4,
                  "dose": "7,2 –º–ª"
                }
              ]
            }
          ]
        },
        {
          "concentration": "250 –º–≥/5 –º–ª",
          "note": "2 —Ä–∞–∑–∞ –≤ —Å—É—Ç–∫–∏",
          "dosages": [
            {
              "name": "40 –º–≥/–∫–≥/—Å—É—Ç",
              "data": [
                {
                  "weight": 10,
                  "dose": "4 –º–ª"
                },
                {
                  "weight": 11,
                  "dose": "4,4 –º–ª"
                },
                {
                  "weight": 12,
                  "dose": "4,8 –º–ª"
                },
                {
                  "weight": 13,
                  "dose": "5,2 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "5,6 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "6 –º–ª"
                },
                {
                  "weight": 16,
                  "dose": "6,4 –º–ª"
                },
                {
                  "weight": 17,
                  "dose": "6,8 –º–ª"
                },
                {
                  "weight": 18,
                  "dose": "7,2 –º–ª"
                },
                {
                  "weight": 19,
                  "dose": "7,6 –º–ª"
                },
                {
                  "weight": 20,
                  "dose": "8 –º–ª"
                },
                {
                  "weight": 25,
                  "dose": "10 –º–ª"
                },
                {
                  "weight": 30,
                  "dose": "12 –º–ª"
                },
                {
                  "weight": 35,
                  "dose": "14 –º–ª"
                },
                {
                  "weight": 40,
                  "dose": "16 –º–ª"
                }
              ]
            },
            {
              "name": "50 –º–≥/–∫–≥/—Å—É—Ç",
              "data": [
                {
                  "weight": 10,
                  "dose": "5 –º–ª"
                },
                {
                  "weight": 11,
                  "dose": "5,5 –º–ª"
                },
                {
                  "weight": 12,
                  "dose": "6 –º–ª"
                },
                {
                  "weight": 13,
                  "dose": "6,5 –º–ª"
                },
                {
                  "weight": 14,
                  "dose": "7 –º–ª"
                },
                {
                  "weight": 15,
                  "dose": "7,5 –º–ª"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "azidrat",
      "name": "–ê–∑–∏–¥—Ä–∞—Ç (–ê–∑–∏—Ç—Ä–æ–º–∏—Ü–∏–Ω)",
      "note": "3-–¥–Ω–µ–≤–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è, 10 –º–≥/–∫–≥/—Å—É—Ç–∫–∏",
      "preparations": [
        {
          "concentration": "100 –º–≥/5 –º–ª",
          "frequency": "1 —Ä–∞–∑ –≤ –¥–µ–Ω—å",
          "data": [
            {
              "weight": 5,
              "dose": "2,5 –º–ª"
            },
            {
              "weight": 6,
              "dose": "3 –º–ª"
            },
            {
              "weight": 7,
              "dose": "3,5 –º–ª"
            },
            {
              "weight": 8,
              "dose": "4 –º–ª"
            },
            {
              "weight": 9,
              "dose": "4,5 –º–ª"
            },
            {
              "weight": 10,
              "dose": "5 –º–ª"
            },
            {
              "weight": 11,
              "dose": "5,5 –º–ª"
            },
            {
              "weight": 12,
              "dose": "6 –º–ª"
            },
            {
              "weight": 13,
              "dose": "6,5 –º–ª"
            },
            {
              "weight": 14,
              "dose": "7 –º–ª"
            },
            {
              "weight_range": "15-25 –∫–≥ (3-7 –ª–µ—Ç)",
              "dose": "10 –º–ª (200 –º–≥)"
            },
            {
              "weight_range": "26-35 –∫–≥ (8-11 –ª–µ—Ç)",
              "dose": "15 –º–ª (300 –º–≥)"
            },
            {
              "weight_range": "36-45 –∫–≥ (12-14 –ª–µ—Ç)",
              "dose": "20 –º–ª (400 –º–≥)"
            }
          ]
        },
        {
          "concentration": "200 –º–≥/5 –º–ª",
          "frequency": "1 —Ä–∞–∑ –≤ –¥–µ–Ω—å",
          "data": [
            {
              "weight": 10,
              "dose": "2,5 –º–ª"
            },
            {
              "weight": 11,
              "dose": "2,75 –º–ª"
            },
            {
              "weight": 12,
              "dose": "3 –º–ª"
            },
            {
              "weight": 13,
              "dose": "3,25 –º–ª"
            },
            {
              "weight": 14,
              "dose": "4 –º–ª"
            },
            {
              "weight_range": "15-25 –∫–≥ (3-7 –ª–µ—Ç)",
              "dose": "5 –º–ª (200 –º–≥)"
            },
            {
              "weight_range": "26-35 –∫–≥ (8-11 –ª–µ—Ç)",
              "dose": "7,5 –º–ª (300 –º–≥)"
            },
            {
              "weight_range": "36-45 –∫–≥ (12-14 –ª–µ—Ç)",
              "dose": "10 –º–ª (400 –º–≥)"
            }
          ]
        }
      ]
    }
  ]
};
        
        class ModernDosageCalculator {
    constructor(data) {
        this.data = data;
        this.state = {
            selectedDrug: null,
            selectedPreparation: null,
            selectedDosage: null,
            weight: 5
        };
        
        this.initElements();
        this.initDrugs();
        this.initEventListeners();
    }
    
    initElements() {
        this.drugSelector = document.getElementById('drugSelector');
        this.concentrationBlock = document.getElementById('concentrationBlock');
        this.concentrationSelector = document.getElementById('concentrationSelector');
        this.weightBlock = document.getElementById('weightBlock');
        this.weightSlider = document.getElementById('weightSlider');
        this.weightValue = document.getElementById('weightValue');
        this.dosageBlock = document.getElementById('dosageBlock');
        this.dosageSelector = document.getElementById('dosageSelector');
        this.calculateBtn = document.getElementById('calculateBtn');
        
        this.resultCard = document.getElementById('resultCard');
        this.resultDose = document.getElementById('resultDose');
        this.resDrug = document.getElementById('resDrug');
        this.resConc = document.getElementById('resConc');
        this.resWeight = document.getElementById('resWeight');
        this.resRegime = document.getElementById('resRegime');
        
        this.warningCard = document.getElementById('warningCard');
        this.warningText = document.getElementById('warningText');
        
        this.tableBody = document.getElementById('tableBody');
    }
    
    initDrugs() {
        this.data.drugs.forEach((drug, index) => {
            const btn = document.createElement('button');
            btn.className = 'drug-btn';
            btn.innerHTML = `<span>${drug.name}</span>`;
            btn.dataset.drugIndex = index;
            
            btn.addEventListener('click', () => this.selectDrug(index));
            
            this.drugSelector.appendChild(btn);
        });
    }
    
    initEventListeners() {
        this.weightSlider.addEventListener('input', (e) => {
            this.state.weight = parseFloat(e.target.value);
            this.weightValue.textContent = `${this.state.weight} –∫–≥`;
            this.updateSliderBackground();
        });
        
        this.calculateBtn.addEventListener('click', () => this.calculate());
    }
    
    updateSliderBackground() {
        const min = parseFloat(this.weightSlider.min);
        const max = parseFloat(this.weightSlider.max);
        const value = parseFloat(this.weightSlider.value);
        const percentage = ((value - min) / (max - min)) * 100;
        
        this.weightSlider.style.background = `linear-gradient(to right, var(--light-blue) 0%, var(--medium-blue) ${percentage}%, var(--sand) ${percentage}%)`;
    }
    
    selectDrug(index) {
        // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
        document.querySelectorAll('.drug-btn').forEach(btn => btn.classList.remove('active'));
        
        // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
        document.querySelector(`[data-drug-index="${index}"]`).classList.add('active');
        
        this.state.selectedDrug = this.data.drugs[index];
        this.state.selectedPreparation = null;
        this.state.selectedDosage = null;
        
        this.showConcentrations();
        this.hideResults();
    }
    
    showConcentrations() {
        this.concentrationSelector.innerHTML = '';
        this.concentrationBlock.style.display = 'block';
        
        this.state.selectedDrug.preparations.forEach((prep, index) => {
            const option = document.createElement('div');
            option.className = 'conc-option';
            option.dataset.prepIndex = index;
            
            let label = prep.concentration;
            if (prep.note) {
                label += ` <span style="color: var(--taupe); font-size: 12px;">(${prep.note})</span>`;
            }
            
            option.innerHTML = `
                <div class="conc-radio"></div>
                <div>${label}</div>
            `;
            
            option.addEventListener('click', () => this.selectConcentration(index));
            
            this.concentrationSelector.appendChild(option);
        });
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é
        this.selectConcentration(0);
    }
    
    selectConcentration(index) {
        // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
        document.querySelectorAll('.conc-option').forEach(opt => opt.classList.remove('active'));
        
        // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
        document.querySelector(`[data-prep-index="${index}"]`).classList.add('active');
        
        this.state.selectedPreparation = this.state.selectedDrug.preparations[index];
        this.state.selectedDosage = null;
        
        this.weightBlock.style.display = 'block';
        this.updateSliderBackground();
        
        if (this.state.selectedPreparation.dosages) {
            this.showDosages();
        } else {
            this.dosageBlock.style.display = 'none';
            this.calculateBtn.style.display = 'block';
        }
        
        this.updateTable();
    }
    
    showDosages() {
        this.dosageSelector.innerHTML = '';
        this.dosageBlock.style.display = 'block';
        
        this.state.selectedPreparation.dosages.forEach((dosage, index) => {
            const chip = document.createElement('div');
            chip.className = 'dosage-chip';
            chip.textContent = dosage.name;
            chip.dataset.dosageIndex = index;
            
            chip.addEventListener('click', () => this.selectDosage(index));
            
            this.dosageSelector.appendChild(chip);
        });
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –¥–æ–∑—É
        this.selectDosage(0);
    }
    
    selectDosage(index) {
        // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
        document.querySelectorAll('.dosage-chip').forEach(chip => chip.classList.remove('active'));
        
        // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
        document.querySelector(`[data-dosage-index="${index}"]`).classList.add('active');
        
        this.state.selectedDosage = this.state.selectedPreparation.dosages[index];
        this.calculateBtn.style.display = 'block';
        
        this.updateTable();
    }
    
    updateTable() {
        let data;
        
        if (this.state.selectedDosage) {
            data = this.state.selectedDosage.data;
        } else if (this.state.selectedPreparation && !this.state.selectedPreparation.dosages) {
            data = this.state.selectedPreparation.data;
        } else {
            return;
        }
        
        this.tableBody.innerHTML = '';
        
        data.forEach(item => {
            const row = document.createElement('tr');
            
            const weightCell = document.createElement('td');
            weightCell.textContent = item.weight ? `${item.weight} –∫–≥` : item.weight_range;
            
            const doseCell = document.createElement('td');
            doseCell.textContent = item.dose;
            doseCell.style.fontWeight = '600';
            doseCell.style.color = 'var(--sandoz-blue)';
            
            row.appendChild(weightCell);
            row.appendChild(doseCell);
            this.tableBody.appendChild(row);
        });
    }
    
    calculate() {
        const weight = this.state.weight;
        
        if (!this.state.selectedDrug || !this.state.selectedPreparation) {
            this.showWarning('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é');
            return;
        }
        
        let data;
        if (this.state.selectedDosage) {
            data = this.state.selectedDosage.data;
        } else {
            data = this.state.selectedPreparation.data;
        }
        
        const result = this.findDoseForWeight(data, weight);
        this.displayResult(result);
    }
    
    findDoseForWeight(data, weight) {
        // –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        let exactMatch = data.find(item => item.weight === weight);
        if (exactMatch) {
            return { dose: exactMatch.dose, exact: true, weight: weight };
        }
        
        // –ü–æ–∏—Å–∫ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
        let rangeMatch = data.find(item => {
            if (!item.weight_range) return false;
            const match = item.weight_range.match(/(\d+)-(\d+)/);
            if (match) {
                const min = parseInt(match[1]);
                const max = parseInt(match[2]);
                return weight >= min && weight <= max;
            }
            return false;
        });
        
        if (rangeMatch) {
            return { dose: rangeMatch.dose, exact: true, weight: rangeMatch.weight_range };
        }
        
        // –ë–ª–∏–∂–∞–π—à–µ–µ –º–µ–Ω—å—à–µ–µ
        const validWeights = data
            .filter(item => item.weight && item.weight <= weight)
            .sort((a, b) => b.weight - a.weight);
        
        if (validWeights.length > 0) {
            return { 
                dose: validWeights[0].dose, 
                exact: false, 
                weight: validWeights[0].weight,
                inputWeight: weight
            };
        }
        
        // –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π –≤–µ—Å
        const minWeight = Math.min(...data.filter(d => d.weight).map(d => d.weight));
        return { 
            dose: null, 
            error: `–í–µ—Å –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å: ${minWeight} –∫–≥`,
            weight: weight
        };
    }
    
    displayResult(result) {
        this.warningCard.classList.remove('show');
        
        if (result.error) {
            this.showWarning(result.error);
            this.resultCard.classList.remove('show');
            return;
        }
        
        if (result.dose === '-' || !result.dose) {
            this.showWarning('–î–ª—è –¥–∞–Ω–Ω–æ–≥–æ –≤–µ—Å–∞ –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –¥–æ–∑–∏—Ä–æ–≤–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É.');
            this.resultCard.classList.remove('show');
            return;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        this.resultDose.textContent = result.dose;
        this.resDrug.textContent = this.state.selectedDrug.name;
        this.resConc.textContent = this.state.selectedPreparation.concentration;
        this.resWeight.textContent = `${this.state.weight} –∫–≥`;
        
        if (this.state.selectedDosage) {
            this.resRegime.textContent = this.state.selectedDosage.name;
        } else {
            this.resRegime.textContent = this.state.selectedPreparation.frequency || '–ü–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏';
        }
        
        // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–º —Ä–∞—Å—á–µ—Ç–µ
        if (!result.exact) {
            this.showWarning(`–†–∞—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Å–∞ ${result.weight} –∫–≥ (–±–ª–∏–∂–∞–π—à–µ–µ –º–µ–Ω—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫ –≤–≤–µ–¥–µ–Ω–Ω–æ–º—É –≤–µ—Å—É ${result.inputWeight} –∫–≥).`);
        }
        
        this.resultCard.classList.add('show');
        this.highlightTableRow(result.exact ? this.state.weight : result.weight);
        
        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
        this.resultCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
    
    showWarning(text) {
        this.warningText.textContent = text;
        this.warningCard.classList.add('show');
    }
    
    hideResults() {
        this.resultCard.classList.remove('show');
        this.warningCard.classList.remove('show');
    }
    
    highlightTableRow(weight) {
        const rows = this.tableBody.querySelectorAll('tr');
        rows.forEach(row => {
            row.classList.remove('highlight');
            const weightCell = row.cells[0];
            if (weightCell && weightCell.textContent.includes(weight.toString())) {
                row.classList.add('highlight');
            }
        });
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
document.addEventListener('DOMContentLoaded', () => {
    const calculator = new ModernDosageCalculator(dosageData);
});

    </script>
</body>
</html>
